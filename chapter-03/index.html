<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<title>Jouer avec JavaScript</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
  display: block;
}
audio,
canvas,
video {
  display: inline-block;
}
audio:not([controls]) {
  display: none;
  height: 0;
}
script {
  display: none !important;
}
html {
  /* font-family: sans-serif; */
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
}
a {
  background: transparent;
}
a:focus {
  outline: thin dotted;
}
a:active,
a:hover {
  outline: 0;
}
h1 {
  font-size: 2em;
  margin: 0.67em 0;
}
abbr[title] {
  border-bottom: 1px dotted;
}
b,
strong {
  font-weight: bold;
}
dfn {
  font-style: italic;
}
hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}
mark {
  background: #ff0;
  color: #000;
}
code,
kbd,
pre,
samp {
  font-family: monospace;
  font-size: 1em;
}
pre {
  white-space: pre-wrap;
}
q {
  quotes: '\201C' '\201D' '\2018' '\2019';
}
small {
  font-size: 80%;
}
sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
sup {
  top: -0.5em;
}
sub {
  bottom: -0.25em;
}
img {
  border: 0;
}
svg:not(:root) {
  overflow: hidden;
}
figure {
  margin: 0;
}
fieldset {
  border: 1px solid silver;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}
legend {
  border: 0;
  padding: 0;
}
button,
input,
select,
textarea {
  font-family: inherit;
  font-size: 100%;
  margin: 0;
}
button,
input {
  line-height: normal;
}
button,
select {
  text-transform: none;
}
button,
html input[type='button'],
input[type='reset'],
input[type='submit'] {
  -webkit-appearance: button;
  cursor: pointer;
}
button[disabled],
html input[disabled] {
  cursor: default;
}
input[type='checkbox'],
input[type='radio'] {
  box-sizing: border-box;
  padding: 0;
}
button::-moz-focus-inner,
input::-moz-focus-inner {
  border: 0;
  padding: 0;
}
textarea {
  overflow: auto;
  vertical-align: top;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
*,
*::before,
*::after {
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
html,
body {
  font-size: 18px;
}
body {
  background: #fff;
  color: rgba(0, 0, 0, 0.8);
  padding: 0;
  margin: 0;
  font-family: Georgia, "Times New Roman", Times, serif;
  font-weight: 400;
  font-style: normal;
  line-height: 1.5;
  position: relative;
  cursor: auto;
  tab-size: 4;
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
}
a:hover {
  cursor: pointer;
}
img,
object,
embed {
  max-width: 100%;
  height: auto;
}
object,
embed {
  height: 100%;
}
img {
  -ms-interpolation-mode: bicubic;
}
.left {
  float: left !important;
}
.right {
  float: right !important;
}
.text-left {
  text-align: left !important;
}
.text-right {
  text-align: right !important;
}
.text-center {
  text-align: center !important;
}
.text-justify {
  text-align: justify !important;
}
.hide {
  display: none;
}
img,
object,
svg {
  display: inline-block;
  vertical-align: middle;
}
textarea {
  height: auto;
  min-height: 50px;
}
select {
  width: 100%;
}
.center {
  margin-left: auto;
  margin-right: auto;
}
.stretch {
  width: 100%;
}
p.lead,
.paragraph.lead > p,
#preamble > .sectionbody > .paragraph:first-of-type p {
  font-size: 1.21875em;
  line-height: 1.6;
}
.subheader,
.admonitionblock td.content > .title,
.audioblock > .title,
.exampleblock > .title,
.imageblock > .title,
.listingblock > .title,
.literalblock > .title,
.stemblock > .title,
.openblock > .title,
.paragraph > .title,
.quoteblock > .title,
table.tableblock > .title,
.verseblock > .title,
.videoblock > .title,
.dlist > .title,
.olist > .title,
.ulist > .title,
.qlist > .title,
.hdlist > .title {
  line-height: 1.45;
  color: #7a2518;
  font-weight: 400;
  margin-top: 0;
  margin-bottom: 0.25em;
}
div,
dl,
dt,
dd,
ul,
ol,
li,
h1,
h2,
h3,
#toctitle,
.sidebarblock > .content > .title,
h4,
h5,
h6,
pre,
form,
p,
blockquote,
th,
td {
  margin: 0;
  padding: 0;
  direction: ltr;
}
a {
  color: #2156a5;
  text-decoration: underline;
  line-height: inherit;
}
a:hover,
a:focus {
  color: #1d4b8f;
}
a img {
  border: none;
}
p {
  font-family: inherit;
  font-weight: 400;
  font-size: 1em;
  line-height: 1.6;
  margin-bottom: 1.25em;
  text-rendering: optimizeLegibility;
}
p aside {
  font-size: 0.875em;
  line-height: 1.35;
  font-style: italic;
}
h1,
h2,
h3,
#toctitle,
.sidebarblock > .content > .title,
h4,
h5,
h6 {
  font-family: 'Open Sans', 'DejaVu Sans', sans-serif;
  font-weight: 300;
  font-style: normal;
  color: #ba3925;
  text-rendering: optimizeLegibility;
  margin-top: 1em;
  margin-bottom: 0.5em;
  line-height: 1.0125em;
}
h1 small,
h2 small,
h3 small,
#toctitle small,
.sidebarblock > .content > .title small,
h4 small,
h5 small,
h6 small {
  font-size: 60%;
  color: #e99b8f;
  line-height: 0;
}
h1 {
  font-size: 2.125em;
}
h2 {
  font-size: 1.6875em;
}
h3,
#toctitle,
.sidebarblock > .content > .title {
  font-size: 1.375em;
}
h4,
h5 {
  font-size: 1.125em;
}
h6 {
  font-size: 1em;
}
hr {
  border: solid #ddddd8;
  border-width: 1px 0 0;
  clear: both;
  margin: 1.25em 0 1.1875em;
  height: 0;
}
em,
i {
  font-style: italic;
  line-height: inherit;
}
strong,
b {
  font-weight: bold;
  line-height: inherit;
}
small {
  font-size: 60%;
  line-height: inherit;
}
code {
  font-family: 'Droid Sans Mono', 'DejaVu Sans Mono', monospace;
  font-weight: 400;
  color: rgba(0, 0, 0, 0.9);
}
ul,
ol,
dl {
  font-size: 1em;
  line-height: 1.6;
  margin-bottom: 1.25em;
  list-style-position: outside;
  font-family: inherit;
}
ul,
ol {
  margin-left: 1.5em;
}
ul li ul,
ul li ol {
  margin-left: 1.25em;
  margin-bottom: 0;
  font-size: 1em;
}
ul.square li ul,
ul.circle li ul,
ul.disc li ul {
  list-style: inherit;
}
ul.square {
  list-style-type: square;
}
ul.circle {
  list-style-type: circle;
}
ul.disc {
  list-style-type: disc;
}
ol li ul,
ol li ol {
  margin-left: 1.25em;
  margin-bottom: 0;
}
dl dt {
  margin-bottom: 0.3125em;
  font-weight: bold;
}
dl dd {
  margin-bottom: 1.25em;
}
abbr,
acronym {
  text-transform: uppercase;
  font-size: 90%;
  color: rgba(0, 0, 0, 0.8);
  border-bottom: 1px dotted #ddd;
  cursor: help;
}
abbr {
  text-transform: none;
}
blockquote {
  margin: 0 0 1.25em;
  padding: 0.5625em 1.25em 0 1.1875em;
  border-left: 1px solid #ddd;
}
blockquote cite {
  display: block;
  font-size: 0.9375em;
  color: rgba(0, 0, 0, 0.6);
}
blockquote cite::before {
  content: '\2014 \0020';
}
blockquote cite a,
blockquote cite a:visited {
  color: rgba(0, 0, 0, 0.6);
}
blockquote,
blockquote p {
  line-height: 1.6;
  color: rgba(0, 0, 0, 0.85);
}
@media only screen and (min-width: 768px) {
  h1,
  h2,
  h3,
  #toctitle,
  .sidebarblock > .content > .title,
  h4,
  h5,
  h6 {
    line-height: 1.2;
  }
  h1 {
    font-size: 2.75em;
  }
  h2 {
    font-size: 2.3125em;
  }
  h3,
  #toctitle,
  .sidebarblock > .content > .title {
    font-size: 1.6875em;
  }
  h4 {
    font-size: 1.4375em;
  }
}
table {
  background: #fff;
  margin-bottom: 1.25em;
  border: solid 1px #dedede;
}
table thead,
table tfoot {
  background: #f7f8f7;
}
table thead tr th,
table thead tr td,
table tfoot tr th,
table tfoot tr td {
  padding: 0.5em 0.625em 0.625em;
  font-size: inherit;
  color: rgba(0, 0, 0, 0.8);
  text-align: left;
}
table tr th,
table tr td {
  padding: 0.5625em 0.625em;
  font-size: inherit;
  color: rgba(0, 0, 0, 0.8);
}
table tr.even,
table tr.alt,
table tr:nth-of-type(even) {
  background: #f8f8f7;
}
table thead tr th,
table tfoot tr th,
table tbody tr td,
table tr td,
table tfoot tr td {
  display: table-cell;
  line-height: 1.6;
}
h1,
h2,
h3,
#toctitle,
.sidebarblock > .content > .title,
h4,
h5,
h6 {
  line-height: 1.2;
  word-spacing: -0.05em;
}
h1 strong,
h2 strong,
h3 strong,
#toctitle strong,
.sidebarblock > .content > .title strong,
h4 strong,
h5 strong,
h6 strong {
  font-weight: 400;
}
.clearfix::before,
.clearfix::after,
.float-group::before,
.float-group::after {
  content: ' ';
  display: table;
}
.clearfix::after,
.float-group::after {
  clear: both;
}
*:not(pre) > code {
  font-size: 0.9375em;
  font-style: normal !important;
  letter-spacing: 0;
  padding: 0.1em 0.5ex;
  word-spacing: -0.15em;
  background-color: #f7f7f8;
  -webkit-border-radius: 4px;
  border-radius: 4px;
  line-height: 1.45;
  text-rendering: optimizeSpeed;
  word-wrap: break-word;
}
*:not(pre) > code.nobreak {
  word-wrap: normal;
}
*:not(pre) > code.nowrap {
  white-space: nowrap;
}
pre,
pre > code {
  line-height: 1.45;
  color: rgba(0, 0, 0, 0.9);
  font-family: 'Droid Sans Mono', 'DejaVu Sans Mono', monospace;
  font-weight: 400;
  text-rendering: optimizeSpeed;
}
em em {
  font-style: normal;
}
strong strong {
  font-weight: 400;
}
.keyseq {
  color: rgba(51, 51, 51, 0.8);
}
kbd {
  font-family: 'Droid Sans Mono', 'DejaVu Sans Mono', monospace;
  display: inline-block;
  color: rgba(0, 0, 0, 0.8);
  font-size: 0.65em;
  line-height: 1.45;
  background-color: #f7f7f7;
  border: 1px solid #ccc;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset;
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em #fff inset;
  margin: 0 0.15em;
  padding: 0.2em 0.5em;
  vertical-align: middle;
  position: relative;
  top: -0.1em;
  white-space: nowrap;
}
.keyseq kbd:first-child {
  margin-left: 0;
}
.keyseq kbd:last-child {
  margin-right: 0;
}
.menuseq,
.menuref {
  color: #000;
}
.menuseq b:not(.caret),
.menuref {
  font-weight: inherit;
}
.menuseq {
  word-spacing: -0.02em;
}
.menuseq b.caret {
  font-size: 1.25em;
  line-height: 0.8;
}
.menuseq i.caret {
  font-weight: bold;
  text-align: center;
  width: 0.45em;
}
b.button::before,
b.button::after {
  position: relative;
  top: -1px;
  font-weight: 400;
}
b.button::before {
  content: '[';
  padding: 0 3px 0 2px;
}
b.button::after {
  content: ']';
  padding: 0 2px 0 3px;
}
p a > code:hover {
  color: rgba(0, 0, 0, 0.9);
}
#header,
#content,
#footnotes,
#footer {
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  margin-top: 0;
  margin-bottom: 0;
  max-width: 62.5em;
  *zoom: 1;
  position: relative;
  padding-left: 0.9375em;
  padding-right: 0.9375em;
}
#header::before,
#header::after,
#content::before,
#content::after,
#footnotes::before,
#footnotes::after,
#footer::before,
#footer::after {
  content: ' ';
  display: table;
}
#header::after,
#content::after,
#footnotes::after,
#footer::after {
  clear: both;
}
#content {
  margin-top: 1.25em;
}
#content::before {
  content: none;
}
#header > h1:first-child {
  color: rgba(0, 0, 0, 0.85);
  margin-top: 2.25rem;
  margin-bottom: 0;
}
#header > h1:first-child + #toc {
  margin-top: 8px;
  border-top: 1px solid #ddddd8;
}
#header > h1:only-child,
body.toc2 #header > h1:nth-last-child(2) {
  border-bottom: 1px solid #ddddd8;
  padding-bottom: 8px;
}
#header .details {
  border-bottom: 1px solid #ddddd8;
  line-height: 1.45;
  padding-top: 0.25em;
  padding-bottom: 0.25em;
  padding-left: 0.25em;
  color: rgba(0, 0, 0, 0.6);
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -ms-flex-flow: row wrap;
  -webkit-flex-flow: row wrap;
  flex-flow: row wrap;
}
#header .details span:first-child {
  margin-left: -0.125em;
}
#header .details span.email a {
  color: rgba(0, 0, 0, 0.85);
}
#header .details br {
  display: none;
}
#header .details br + span::before {
  content: '\00a0\2013\00a0';
}
#header .details br + span.author::before {
  content: '\00a0\22c5\00a0';
  color: rgba(0, 0, 0, 0.85);
}
#header .details br + span#revremark::before {
  content: '\00a0|\00a0';
}
#header #revnumber {
  text-transform: capitalize;
}
#header #revnumber::after {
  content: '\00a0';
}
#content > h1:first-child:not([class]) {
  color: rgba(0, 0, 0, 0.85);
  border-bottom: 1px solid #ddddd8;
  padding-bottom: 8px;
  margin-top: 0;
  padding-top: 1rem;
  margin-bottom: 1.25rem;
}
#toc {
  border-bottom: 1px solid #efefed;
  padding-bottom: 0.5em;
}
#toc > ul {
  margin-left: 0.125em;
}
#toc ul.sectlevel0 > li > a {
  font-style: italic;
}
#toc ul.sectlevel0 ul.sectlevel1 {
  margin: 0.5em 0;
}
#toc ul {
  font-family: Gill Sans, Gill Sans MT, Calibri, sans-serif;
  list-style-type: none;
}
#toc li {
  line-height: 1.3334;
  margin-top: 0.3334em;
}
#toc a {
  text-decoration: none;
  white-space: normal;
}
#toc a:active {
  text-decoration: underline;
}
#toctitle {
  color: #7a2518;
  font-size: 1.2em;
}
@media only screen and (min-width: 768px) {
  #toctitle {
    font-size: 1.375em;
  }
  body.toc2 {
    padding-left: 16em;
    padding-right: 1em;
  }
  #toc.toc2 {
    margin-top: 0 !important;
    background-color: #f8f8f7;
    position: fixed;
    width: 15em;
    left: 0;
    top: 0;
    border-right: 1px solid #efefed;
    border-top-width: 0 !important;
    border-bottom-width: 0 !important;
    z-index: 1000;
    padding: 1.25em 1em;
    height: 100%;
    overflow: auto;
  }
  #toc.toc2 #toctitle {
    margin-top: 0;
    margin-bottom: 0.8rem;
    font-size: 1.2em;
  }
  #toc.toc2 > ul {
    font-size: 0.85em;
    margin-bottom: 0;
  }
  #toc.toc2 ul ul {
    margin-left: 0;
    padding-left: 1em;
  }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 {
    padding-left: 0;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
  body.toc2.toc-right {
    padding-left: 0;
    padding-right: 15em;
  }
  body.toc2.toc-right #toc.toc2 {
    border-right-width: 0;
    border-left: 1px solid #efefed;
    left: auto;
    right: 0;
  }
}
@media only screen and (min-width: 1280px) {
  body.toc2 {
    padding-left: 27%;
    padding-left: 27vw;
    padding-right: 2%;
    padding-right: 2vw;
  }
  #toc.toc2 {
    width: 25%;
    width: 25vw;
  }
  #toc.toc2 #toctitle {
    font-size: 1.375em;
  }
  #toc.toc2 ul ul {
    padding-left: 1.25em;
  }
  body.toc2.toc-right {
    padding-left: 0;
    padding-right: 20em;
  }
}
#content #toc {
  border-style: solid;
  border-width: 1px;
  border-color: #e0e0dc;
  margin-bottom: 1.25em;
  padding: 1.25em;
  background: #f8f8f7;
  -webkit-border-radius: 4px;
  border-radius: 4px;
}
#content #toc > :first-child {
  margin-top: 0;
}
#content #toc > :last-child {
  margin-bottom: 0;
}
#footer {
  max-width: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  padding: 1.25em;
}
#footer-text {
  color: rgba(255, 255, 255, 0.8);
  line-height: 1.44;
}
#content {
  margin-bottom: 0.625em;
}
.sect1 {
  padding-bottom: 0.625em;
}
@media only screen and (min-width: 768px) {
  #content {
    margin-bottom: 1.25em;
  }
  .sect1 {
    padding-bottom: 1.25em;
  }
}
.sect1:last-child {
  padding-bottom: 0;
}
.sect1 + .sect1 {
  border-top: 1px solid #efefed;
}
#content h1 > a.anchor,
h2 > a.anchor,
h3 > a.anchor,
#toctitle > a.anchor,
.sidebarblock > .content > .title > a.anchor,
h4 > a.anchor,
h5 > a.anchor,
h6 > a.anchor {
  position: absolute;
  z-index: 1001;
  width: 1.5ex;
  margin-left: -1.5ex;
  display: block;
  text-decoration: none !important;
  visibility: hidden;
  text-align: center;
  font-weight: 400;
}
#content h1 > a.anchor::before,
h2 > a.anchor::before,
h3 > a.anchor::before,
#toctitle > a.anchor::before,
.sidebarblock > .content > .title > a.anchor::before,
h4 > a.anchor::before,
h5 > a.anchor::before,
h6 > a.anchor::before {
  content: '\00A7';
  font-size: 0.85em;
  display: block;
  padding-top: 0.1em;
}
#content h1:hover > a.anchor,
#content h1 > a.anchor:hover,
h2:hover > a.anchor,
h2 > a.anchor:hover,
h3:hover > a.anchor,
#toctitle:hover > a.anchor,
.sidebarblock > .content > .title:hover > a.anchor,
h3 > a.anchor:hover,
#toctitle > a.anchor:hover,
.sidebarblock > .content > .title > a.anchor:hover,
h4:hover > a.anchor,
h4 > a.anchor:hover,
h5:hover > a.anchor,
h5 > a.anchor:hover,
h6:hover > a.anchor,
h6 > a.anchor:hover {
  visibility: visible;
}
#content h1 > a.link,
h2 > a.link,
h3 > a.link,
#toctitle > a.link,
.sidebarblock > .content > .title > a.link,
h4 > a.link,
h5 > a.link,
h6 > a.link {
  color: #ba3925;
  text-decoration: none;
}
#content h1 > a.link:hover,
h2 > a.link:hover,
h3 > a.link:hover,
#toctitle > a.link:hover,
.sidebarblock > .content > .title > a.link:hover,
h4 > a.link:hover,
h5 > a.link:hover,
h6 > a.link:hover {
  color: #a53221;
}
.audioblock,
.imageblock,
.literalblock,
.listingblock,
.stemblock,
.videoblock {
  margin-bottom: 1.25em;
}
.admonitionblock td.content > .title,
.audioblock > .title,
.exampleblock > .title,
.imageblock > .title,
.listingblock > .title,
.literalblock > .title,
.stemblock > .title,
.openblock > .title,
.paragraph > .title,
.quoteblock > .title,
table.tableblock > .title,
.verseblock > .title,
.videoblock > .title,
.dlist > .title,
.olist > .title,
.ulist > .title,
.qlist > .title,
.hdlist > .title {
  text-rendering: optimizeLegibility;
  text-align: left;
  font-family: Gill Sans, Gill Sans MT, Calibri, sans-serif;
  font-size: 1rem;
  font-style: italic;
  font-weight: 300;
}
table.tableblock > caption.title {
  white-space: nowrap;
  overflow: visible;
  max-width: 0;
}
.paragraph.lead > p,
#preamble > .sectionbody > .paragraph:first-of-type p {
  color: rgba(0, 0, 0, 0.85);
}
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p {
  font-size: inherit;
}
.admonitionblock > table {
  border-collapse: separate;
  border: 0;
  background: none;
  width: 100%;
}
.admonitionblock > table td.icon {
  text-align: center;
  width: 80px;
}
.admonitionblock > table td.icon img {
  max-width: none;
}
.admonitionblock > table td.icon .title {
  font-weight: bold;
  /* font-family: 'Open Sans', 'DejaVu Sans', sans-serif; */
  text-transform: uppercase;
}
.admonitionblock > table td.content {
  padding-left: 1.125em;
  padding-right: 1.25em;
  border-left: 1px solid #ddddd8;
  color: rgba(0, 0, 0, 0.6);
}
.admonitionblock > table td.content > :last-child > :last-child {
  margin-bottom: 0;
}
.exampleblock > .content {
  border-style: solid;
  border-width: 1px;
  border-color: #e6e6e6;
  margin-bottom: 1.25em;
  padding: 1.25em;
  background: #fff;
  -webkit-border-radius: 4px;
  border-radius: 4px;
}
.exampleblock > .content > :first-child {
  margin-top: 0;
}
.exampleblock > .content > :last-child {
  margin-bottom: 0;
}
.sidebarblock {
  border-style: solid;
  border-width: 1px;
  border-color: #e0e0dc;
  margin-bottom: 1.25em;
  padding: 1.25em;
  background: #f8f8f7;
  -webkit-border-radius: 4px;
  border-radius: 4px;
}
.sidebarblock > :first-child {
  margin-top: 0;
}
.sidebarblock > :last-child {
  margin-bottom: 0;
}
.sidebarblock > .content > .title {
  color: #7a2518;
  margin-top: 0;
  text-align: center;
}
.exampleblock > .content > :last-child > :last-child,
.exampleblock > .content .olist > ol > li:last-child > :last-child,
.exampleblock > .content .ulist > ul > li:last-child > :last-child,
.exampleblock > .content .qlist > ol > li:last-child > :last-child,
.sidebarblock > .content > :last-child > :last-child,
.sidebarblock > .content .olist > ol > li:last-child > :last-child,
.sidebarblock > .content .ulist > ul > li:last-child > :last-child,
.sidebarblock > .content .qlist > ol > li:last-child > :last-child {
  margin-bottom: 0;
}
.literalblock pre,
.listingblock pre:not(.highlight),
.listingblock pre[class='highlight'],
.listingblock pre[class^='highlight '],
.listingblock pre.CodeRay,
.listingblock pre.prettyprint {
  background: #f7f7f8;
}
.sidebarblock .literalblock pre,
.sidebarblock .listingblock pre:not(.highlight),
.sidebarblock .listingblock pre[class='highlight'],
.sidebarblock .listingblock pre[class^='highlight '],
.sidebarblock .listingblock pre.CodeRay,
.sidebarblock .listingblock pre.prettyprint {
  background: #f2f1f1;
}
.literalblock pre,
.literalblock pre[class],
.listingblock pre,
.listingblock pre[class] {
  -webkit-border-radius: 4px;
  border-radius: 4px;
  word-wrap: break-word;
  padding: 1em;
  font-size: 0.8125em;
}
.literalblock pre.nowrap,
.literalblock pre[class].nowrap,
.listingblock pre.nowrap,
.listingblock pre[class].nowrap {
  overflow-x: auto;
  white-space: pre;
  word-wrap: normal;
}
@media only screen and (min-width: 768px) {
  .literalblock pre,
  .literalblock pre[class],
  .listingblock pre,
  .listingblock pre[class] {
    font-size: 0.90625em;
  }
}
@media only screen and (min-width: 1280px) {
  .literalblock pre,
  .literalblock pre[class],
  .listingblock pre,
  .listingblock pre[class] {
    font-size: 1em;
  }
}
.literalblock.output pre {
  color: #f7f7f8;
  background-color: rgba(0, 0, 0, 0.9);
}
.listingblock pre.highlightjs {
  padding: 0;
}
.listingblock pre.highlightjs > code {
  padding: 1em;
  -webkit-border-radius: 4px;
  border-radius: 4px;
}
.listingblock pre.prettyprint {
  border-width: 0;
}
.listingblock > .content {
  position: relative;
}
.listingblock code[data-lang]::before {
  display: none;
  content: attr(data-lang);
  position: absolute;
  font-size: 0.75em;
  top: 0.425rem;
  right: 0.5rem;
  line-height: 1;
  text-transform: uppercase;
  color: #999;
}
.listingblock:hover code[data-lang]::before {
  display: block;
}
.listingblock.terminal pre .command::before {
  content: attr(data-prompt);
  padding-right: 0.5em;
  color: #999;
}
.listingblock.terminal pre .command:not([data-prompt])::before {
  content: '$';
}
table.pyhltable {
  border-collapse: separate;
  border: 0;
  margin-bottom: 0;
  background: none;
}
table.pyhltable td {
  vertical-align: top;
  padding-top: 0;
  padding-bottom: 0;
  line-height: 1.45;
}
table.pyhltable td.code {
  padding-left: 0.75em;
  padding-right: 0;
}
pre.pygments .lineno,
table.pyhltable td:not(.code) {
  color: #999;
  padding-left: 0;
  padding-right: 0.5em;
  border-right: 1px solid #ddddd8;
}
pre.pygments .lineno {
  display: inline-block;
  margin-right: 0.25em;
}
table.pyhltable .linenodiv {
  background: none !important;
  padding-right: 0 !important;
}
.quoteblock {
  margin: 0 1em 1.25em 1.5em;
  display: table;
}
.quoteblock > .title {
  margin-left: -1.5em;
  margin-bottom: 0.75em;
}
.quoteblock blockquote,
.quoteblock blockquote p {
  color: rgba(0, 0, 0, 0.85);
  font-size: 1.15rem;
  line-height: 1.75;
  word-spacing: 0.1em;
  letter-spacing: 0;
  font-style: italic;
  text-align: justify;
}
.quoteblock blockquote {
  margin: 0;
  padding: 0;
  border: 0;
}
.quoteblock blockquote::before {
  content: '\201c';
  float: left;
  font-size: 2.75em;
  font-weight: bold;
  line-height: 0.6em;
  margin-left: -0.6em;
  color: #7a2518;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.quoteblock blockquote > .paragraph:last-child p {
  margin-bottom: 0;
}
.quoteblock .attribution {
  margin-top: 0.5em;
  margin-right: 0.5ex;
  text-align: right;
}
.quoteblock .quoteblock {
  margin-left: 0;
  margin-right: 0;
  padding: 0.5em 0;
  border-left: 3px solid rgba(0, 0, 0, 0.6);
}
.quoteblock .quoteblock blockquote {
  padding: 0 0 0 0.75em;
}
.quoteblock .quoteblock blockquote::before {
  display: none;
}
.verseblock {
  margin: 0 1em 1.25em 1em;
}
.verseblock pre {
  /* font-family: 'Open Sans', 'DejaVu Sans', sans; */
  font-size: 1.15rem;
  color: rgba(0, 0, 0, 0.85);
  font-weight: 300;
  text-rendering: optimizeLegibility;
}
.verseblock pre strong {
  font-weight: 400;
}
.verseblock .attribution {
  margin-top: 1.25rem;
  margin-left: 0.5ex;
}
.quoteblock .attribution,
.verseblock .attribution {
  font-size: 0.9375em;
  line-height: 1.45;
  font-style: italic;
}
.quoteblock .attribution br,
.verseblock .attribution br {
  display: none;
}
.quoteblock .attribution cite,
.verseblock .attribution cite {
  display: block;
  letter-spacing: -0.025em;
  color: rgba(0, 0, 0, 0.6);
}
.quoteblock.abstract {
  margin: 0 0 1.25em 0;
  display: block;
}
.quoteblock.abstract blockquote,
.quoteblock.abstract blockquote p {
  text-align: left;
  word-spacing: 0;
}
.quoteblock.abstract blockquote::before,
.quoteblock.abstract blockquote p:first-of-type::before {
  display: none;
}
table.tableblock {
  max-width: 100%;
  border-collapse: separate;
}
p.tableblock:last-child {
  margin-bottom: 0;
}
td.tableblock > .content {
  margin-bottom: -1.25em;
}
table.tableblock,
th.tableblock,
td.tableblock {
  border: 0 solid #dedede;
}
table.grid-all > thead > tr > .tableblock,
table.grid-all > tbody > tr > .tableblock {
  border-width: 0 1px 1px 0;
}
table.grid-all > tfoot > tr > .tableblock {
  border-width: 1px 1px 0 0;
}
table.grid-cols > * > tr > .tableblock {
  border-width: 0 1px 0 0;
}
table.grid-rows > thead > tr > .tableblock,
table.grid-rows > tbody > tr > .tableblock {
  border-width: 0 0 1px 0;
}
table.grid-rows > tfoot > tr > .tableblock {
  border-width: 1px 0 0 0;
}
table.grid-all > * > tr > .tableblock:last-child,
table.grid-cols > * > tr > .tableblock:last-child {
  border-right-width: 0;
}
table.grid-all > tbody > tr:last-child > .tableblock,
table.grid-all > thead:last-child > tr > .tableblock,
table.grid-rows > tbody > tr:last-child > .tableblock,
table.grid-rows > thead:last-child > tr > .tableblock {
  border-bottom-width: 0;
}
table.frame-all {
  border-width: 1px;
}
table.frame-sides {
  border-width: 0 1px;
}
table.frame-topbot {
  border-width: 1px 0;
}
table.stripe-all tr,
table.stripe-odd tr:nth-of-type(odd) {
  background: #f8f8f7;
}
table.stripe-none tr,
table.stripe-odd tr:nth-of-type(even) {
  background: none;
}
th.halign-left,
td.halign-left {
  text-align: left;
}
th.halign-right,
td.halign-right {
  text-align: right;
}
th.halign-center,
td.halign-center {
  text-align: center;
}
th.valign-top,
td.valign-top {
  vertical-align: top;
}
th.valign-bottom,
td.valign-bottom {
  vertical-align: bottom;
}
th.valign-middle,
td.valign-middle {
  vertical-align: middle;
}
table thead th,
table tfoot th {
  font-weight: bold;
}
tbody tr th {
  display: table-cell;
  line-height: 1.6;
  background: #f7f8f7;
}
tbody tr th,
tbody tr th p,
tfoot tr th,
tfoot tr th p {
  color: rgba(0, 0, 0, 0.8);
  font-weight: bold;
}
p.tableblock > code:only-child {
  background: none;
  padding: 0;
}
p.tableblock {
  font-size: 1em;
}
td > div.verse {
  white-space: pre;
}
ol {
  margin-left: 1.75em;
}
ul li ol {
  margin-left: 1.5em;
}
dl dd {
  margin-left: 1.125em;
}
dl dd:last-child,
dl dd:last-child > :last-child {
  margin-bottom: 0;
}
ol > li p,
ul > li p,
ul dd,
ol dd,
.olist .olist,
.ulist .ulist,
.ulist .olist,
.olist .ulist {
  margin-bottom: 0.625em;
}
ul.checklist,
ul.none,
ol.none,
ul.no-bullet,
ol.no-bullet,
ol.unnumbered,
ul.unstyled,
ol.unstyled {
  list-style-type: none;
}
ul.no-bullet,
ol.no-bullet,
ol.unnumbered {
  margin-left: 0.625em;
}
ul.unstyled,
ol.unstyled {
  margin-left: 0;
}
ul.checklist {
  margin-left: 0.625em;
}
ul.checklist li > p:first-child > .fa-square-o:first-child,
ul.checklist li > p:first-child > .fa-check-square-o:first-child {
  width: 1.25em;
  font-size: 0.8em;
  position: relative;
  bottom: 0.125em;
}
ul.checklist li > p:first-child > input[type='checkbox']:first-child {
  margin-right: 0.25em;
}
ul.inline {
  display: -ms-flexbox;
  display: -webkit-box;
  display: flex;
  -ms-flex-flow: row wrap;
  -webkit-flex-flow: row wrap;
  flex-flow: row wrap;
  list-style: none;
  margin: 0 0 0.625em -1.25em;
}
ul.inline > li {
  margin-left: 1.25em;
}
.unstyled dl dt {
  font-weight: 400;
  font-style: normal;
}
ol.arabic {
  list-style-type: decimal;
}
ol.decimal {
  list-style-type: decimal-leading-zero;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}
ol.lowergreek {
  list-style-type: lower-greek;
}
.hdlist > table,
.colist > table {
  border: 0;
  background: none;
}
.hdlist > table > tbody > tr,
.colist > table > tbody > tr {
  background: none;
}
td.hdlist1,
td.hdlist2 {
  vertical-align: top;
  padding: 0 0.625em;
}
td.hdlist1 {
  font-weight: bold;
  padding-bottom: 1.25em;
}
.literalblock + .colist,
.listingblock + .colist {
  margin-top: -0.5em;
}
.colist td:not([class]):first-child {
  padding: 0.4em 0.75em 0 0.75em;
  line-height: 1;
  vertical-align: top;
}
.colist td:not([class]):first-child img {
  max-width: none;
}
.colist td:not([class]):last-child {
  padding: 0.25em 0;
}
.thumb,
.th {
  line-height: 0;
  display: inline-block;
  border: solid 4px #fff;
  -webkit-box-shadow: 0 0 0 1px #ddd;
  box-shadow: 0 0 0 1px #ddd;
}
.imageblock.left,
.imageblock[style*='float: left'] {
  margin: 0.25em 0.625em 1.25em 0;
}
.imageblock.right,
.imageblock[style*='float: right'] {
  margin: 0.25em 0 1.25em 0.625em;
}
.imageblock > .title {
  margin-bottom: 0;
}
.imageblock.thumb,
.imageblock.th {
  border-width: 6px;
}
.imageblock.thumb > .title,
.imageblock.th > .title {
  padding: 0 0.125em;
}
.image.left,
.image.right {
  margin-top: 0.25em;
  margin-bottom: 0.25em;
  display: inline-block;
  line-height: 0;
}
.image.left {
  margin-right: 0.625em;
}
.image.right {
  margin-left: 0.625em;
}
a.image {
  text-decoration: none;
  display: inline-block;
}
a.image object {
  pointer-events: none;
}
sup.footnote,
sup.footnoteref {
  font-size: 0.875em;
  position: static;
  vertical-align: super;
}
sup.footnote a,
sup.footnoteref a {
  text-decoration: none;
}
sup.footnote a:active,
sup.footnoteref a:active {
  text-decoration: underline;
}
#footnotes {
  padding-top: 0.75em;
  padding-bottom: 0.75em;
  margin-bottom: 0.625em;
}
#footnotes hr {
  width: 20%;
  min-width: 6.25em;
  margin: -0.25em 0 0.75em 0;
  border-width: 1px 0 0 0;
}
#footnotes .footnote {
  padding: 0 0.375em 0 0.225em;
  line-height: 1.3334;
  font-size: 0.875em;
  margin-left: 1.2em;
  margin-bottom: 0.2em;
}
#footnotes .footnote a:first-of-type {
  font-weight: bold;
  text-decoration: none;
  margin-left: -1.05em;
}
#footnotes .footnote:last-of-type {
  margin-bottom: 0;
}
#content #footnotes {
  margin-top: -0.625em;
  margin-bottom: 0;
  padding: 0.75em 0;
}
.gist .file-data > table {
  border: 0;
  background: #fff;
  width: 100%;
  margin-bottom: 0;
}
.gist .file-data > table td.line-data {
  width: 99%;
}
div.unbreakable {
  page-break-inside: avoid;
}
.big {
  font-size: larger;
}
.small {
  font-size: smaller;
}
.underline {
  text-decoration: underline;
}
.overline {
  text-decoration: overline;
}
.line-through {
  text-decoration: line-through;
}
.aqua {
  color: #00bfbf;
}
.aqua-background {
  background-color: #00fafa;
}
.black {
  color: #000;
}
.black-background {
  background-color: #000;
}
.blue {
  color: #0000bf;
}
.blue-background {
  background-color: #0000fa;
}
.fuchsia {
  color: #bf00bf;
}
.fuchsia-background {
  background-color: #fa00fa;
}
.gray {
  color: #606060;
}
.gray-background {
  background-color: #7d7d7d;
}
.green {
  color: #006000;
}
.green-background {
  background-color: #007d00;
}
.lime {
  color: #00bf00;
}
.lime-background {
  background-color: #00fa00;
}
.maroon {
  color: #600000;
}
.maroon-background {
  background-color: #7d0000;
}
.navy {
  color: #000060;
}
.navy-background {
  background-color: #00007d;
}
.olive {
  color: #606000;
}
.olive-background {
  background-color: #7d7d00;
}
.purple {
  color: #600060;
}
.purple-background {
  background-color: #7d007d;
}
.red {
  color: #bf0000;
}
.red-background {
  background-color: #fa0000;
}
.silver {
  color: #909090;
}
.silver-background {
  background-color: #bcbcbc;
}
.teal {
  color: #006060;
}
.teal-background {
  background-color: #007d7d;
}
.white {
  color: #bfbfbf;
}
.white-background {
  background-color: #fafafa;
}
.yellow {
  color: #bfbf00;
}
.yellow-background {
  background-color: #fafa00;
}
span.icon > .fa {
  cursor: default;
}
a span.icon > .fa {
  cursor: inherit;
}
.admonitionblock td.icon [class^='fa icon-'] {
  font-size: 2.5em;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
  cursor: default;
}
.admonitionblock td.icon .icon-note::before {
  content: '\f05a';
  color: #19407c;
}
.admonitionblock td.icon .icon-tip::before {
  content: '\f0eb';
  text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8);
  color: #111;
}
.admonitionblock td.icon .icon-warning::before {
  content: '\f071';
  color: #bf6900;
}
.admonitionblock td.icon .icon-caution::before {
  content: '\f06d';
  color: #bf3400;
}
.admonitionblock td.icon .icon-important::before {
  content: '\f06a';
  color: #bf0000;
}
.conum[data-value] {
  display: inline-block;
  color: #fff !important;
  background-color: rgba(0, 0, 0, 0.8);
  -webkit-border-radius: 100px;
  border-radius: 100px;
  text-align: center;
  font-size: 0.75em;
  width: 1.67em;
  height: 1.67em;
  line-height: 1.67em;
  /* font-family: 'Open Sans', 'DejaVu Sans', sans-serif; */
  font-style: normal;
  font-weight: bold;
}
.conum[data-value] * {
  color: #fff !important;
}
.conum[data-value] + b {
  display: none;
}
.conum[data-value]::after {
  content: attr(data-value);
}
pre .conum[data-value] {
  position: relative;
  top: -0.125em;
}
b.conum * {
  color: inherit !important;
  font-style: normal;
}
.conum:not([data-value]):empty {
  display: none;
}
dt,
th.tableblock,
td.content,
div.footnote {
  text-rendering: optimizeLegibility;
}
h1,
h2,
p,
td.content,
span.alt {
  letter-spacing: -0.01em;
}
p strong,
td.content strong,
div.footnote strong {
  letter-spacing: -0.005em;
}
p,
blockquote,
dt,
td.content,
span.alt {
  font-size: 1.0625rem;
}
p {
  margin-bottom: 1.25rem;
}
.sidebarblock p,
.sidebarblock dt,
.sidebarblock td.content,
p.tableblock {
  font-size: 1em;
}
.exampleblock > .content {
  background-color: #fffef7;
  border-color: #e0e0dc;
  -webkit-box-shadow: 0 1px 4px #e0e0dc;
  box-shadow: 0 1px 4px #e0e0dc;
}
.print-only {
  display: none !important;
}
@page {
  margin: 1.25cm 0.75cm;
}
@media print {
  * {
    -webkit-box-shadow: none !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  html {
    font-size: 80%;
  }
  a {
    color: inherit !important;
    text-decoration: underline !important;
  }
  a.bare,
  a[href^='#'],
  a[href^='mailto:'] {
    text-decoration: none !important;
  }
  a[href^='http:']:not(.bare)::after,
  a[href^='https:']:not(.bare)::after {
    content: '(' attr(href) ')';
    display: inline-block;
    font-size: 0.875em;
    padding-left: 0.25em;
  }
  abbr[title]::after {
    content: ' (' attr(title) ')';
  }
  pre,
  blockquote,
  tr,
  img,
  object,
  svg {
    page-break-inside: avoid;
  }
  thead {
    display: table-header-group;
  }
  svg {
    max-width: 100%;
  }
  p,
  blockquote,
  dt,
  td.content {
    font-size: 1em;
    orphans: 3;
    widows: 3;
  }
  h2,
  h3,
  #toctitle,
  .sidebarblock > .content > .title {
    page-break-after: avoid;
  }
  #toc,
  .sidebarblock,
  .exampleblock > .content {
    background: none !important;
  }
  #toc {
    border-bottom: 1px solid #ddddd8 !important;
    padding-bottom: 0 !important;
  }
  .sect1 {
    padding-bottom: 0 !important;
  }
  .sect1 + .sect1 {
    border: 0 !important;
  }
  #header > h1:first-child {
    margin-top: 1.25rem;
  }
  body.book #header {
    text-align: center;
  }
  body.book #header > h1:first-child {
    border: 0 !important;
    margin: 2.5em 0 1em 0;
  }
  body.book #header .details {
    border: 0 !important;
    display: block;
    padding: 0 !important;
  }
  body.book #header .details span:first-child {
    margin-left: 0 !important;
  }
  body.book #header .details br {
    display: block;
  }
  body.book #header .details br + span::before {
    content: none !important;
  }
  body.book #toc {
    border: 0 !important;
    text-align: left !important;
    padding: 0 !important;
    margin: 0 !important;
  }
  body.book #toc,
  body.book #preamble,
  body.book h1.sect0,
  body.book .sect1 > h2 {
    page-break-before: always;
  }
  .listingblock code[data-lang]::before {
    display: block;
  }
  #footer {
    background: none !important;
    padding: 0 0.9375em;
  }
  #footer-text {
    color: rgba(0, 0, 0, 0.6) !important;
    font-size: 0.9em;
  }
  .hide-on-print {
    display: none !important;
  }
  .print-only {
    display: block !important;
  }
  .hide-for-print {
    display: none !important;
  }
  .show-for-print {
    display: inherit !important;
  }
}

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, #toctitle {
  font-style: normal;
  font-weight: 400;
}

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title {
  font-size: 1.0625rem;
}

a {
  white-space: nowrap;
}
.RemarquePreTitre {
  font-style: normal;
  font-weight: bold;
}
  .RemarquePreTitre::after {
    content: "‚Ä¢";
    padding-left: 5px;
  }
.admonitionblock {
}
.admonitionblock > table {
  border: 1px solid #ddddd8;
  box-shadow: 0 0 8px rgba(0,0,0,.1);
  margin: 1.5em 0;
  padding: 1em;
}
.icon .title {
  font-size: 2em;
}

.colist ol {
  margin-left: 1em;    /* aligns with the listing edge */
  font-weight: bold;   /* makes it stand out more */
}
.listingblock pre:not(.hljs),
.language-bash.hljs {
  background: #323232;
  color: wheat;
}
.language-bash.hljs .hljs-built_in,
.language-bash.hljs .hljs-builtin-name {
  color: white;
}
.language-bash.hljs .hljs-string {
  color: lightgreen;
}
.language-bash.hljs .hljs-variable {
  color: lightskyblue;
}
.keyseq {
  font-weight: normal;
  white-space: nowrap;
}
.language-bash.hljs .keyseq {
  color: white;
}
.language-bash.hljs kbd {
  background: transparent;
  box-shadow: none;
  color: white;
  font-size: 0.8em;
  font-weight: bold;
  padding: 0.1em 0.4em;
}

.listingblock pre.highlightjs > code {
  border-left: 4px solid #7a2518;
}
.listingblock pre.highlightjs > code.language-bash {
  border-color: #323232;
}

</style>
<style type="text/css">[data-interactive-runtime="loaded"] .interactive--javascript code[data-lang]:before {
  display: block;
  color: #00c72b;
  font-weight: bold;
  cursor: pointer;
}

  [lang="en"] [data-interactive-runtime="loaded"] .interactive--javascript code[data-lang]:before {
    content: "‚ñ∂ run code";
  }
  [lang="fr"] [data-interactive-runtime="loaded"] .interactive--javascript code[data-lang]:before {
    content: "‚ñ∂ voir le r√©sultat";
  }
  .interactive--javascript code[data-label]:before {
    content: attr(data-label);
  }

.interactive iframe {
  position: absolute;
  visibility: hidden;
}

.interactive.status--loaded iframe {
  position: inherit;
  visibility: visible;
}

.interactive.status--loading {
  opacity: .5;
}
</style>
<script>
(function(d){
  document.addEventListener('DOMContentLoaded', function(){
    const script = d.createElement('script');
    script.src = 'https://embed.runkit.com/';
    script.async = true;
    script.onload = function(){
      function makeListingInteractive (element){
  if (element.classList.contains('interactive--installed') || element.classList.contains('status--loading')) {
    return;
  }

  const code = element.querySelector('code');
  const nodeVersion = /interactive--runtime--node-([^\s]+)/.exec(element.className)[1];
  const isEndpoint = element.classList.contains('interactive--endpoint');
  const mode = isEndpoint ? 'endpoint' : null;
  let preamble = '';

  const source = code
    .textContent
    .replace(/\(\d+\)$/gm, '')
    .replace(/^["']?use strict["'][; ]*\n/, '');

  if (isEndpoint) {
    preamble = `process.nextTick(() => {
      if (typeof module.exports === 'function') {
        exports.endpoint = module.exports;
      }
      else if (typeof server !== 'undefined') {
        exports.endpoint = server.listeners("request").pop();
      }
});`
  }

  element.classList.add('status--loading');

  // eslint-disable-next-line no-undef
  RunKit.createNotebook({
    nodeVersion,
    element,
    source,
    mode,
    preamble,
    onLoad: function(ntbk) {
      element.classList.add('interactive--installed');
      element.classList.remove('status--loading');
      element.classList.add('status--loaded');
      code.parentNode.setAttribute('hidden', true);

      ntbk.evaluate();
    }
  });
}
function installEvents () {
  function getParent(el, condition) {
    let parent = el;

    while(parent = parent.parentNode) {
      if (condition(parent)) {
        return parent;
      }
    }
  }

  function hasClass(className) {
    return function check(el) {
      return el.classList.contains(className);
    }
  }

  document.querySelector('body').addEventListener('click', function(el) {
    if (el.target.classList.contains('language-javascript') || el.target.classList.contains('language-js')) {
      const parentNode = getParent(
        el.target,
        hasClass('interactive--javascript')
      );

      makeListingInteractive(parentNode);
    }
  });
}
      installEvents();
      document.body.dataset.interactiveRuntime = 'loaded';
    };
    document.body.appendChild(script);
  });
})(document);</script>
<style type="text/css">
.listingblock [data-bash-subs]::before {
  content: attr(data-bash-subs) " ";
  opacity: .5; }

.listingblock [data-bash-conum]::before {
  content: "(" attr(data-bash-conum) ")";
  font-weight: bold;
  opacity: .7;
}</style>
<script>
(function(d){
  d.addEventListener('DOMContentLoaded', function(){
    const script = d.createElement('script');
    script.src = 'https://wzrd.in/standalone/menuspy';
    script.async = true;
    script.onload = () => new menuspy(document.querySelector('#toc'), {enableLocationHash: false});
    d.body.appendChild(script);
  });
})(document);</script>
<style type="text/css">
#toc li.active > a[href^="#"] {
  background: #ffc;
  font-weight: bold;
}
#toc li.active > a[href^="#"]::before {
  content: "‚ñ∂ ";
  display: inline-block;
  position: absolute;
  margin-left: -1.2em;
  font-size: .8em;
  margin-top: 3px;
}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Jouer avec JavaScript</h1>
<div class="details">
<span id="revdate">2018-10-19</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table des mati√®res</div>
<ul class="sectlevel1">
<li><a href="#definition">1. Qu&#8217;est-ce que JavaScript ?</a>
<ul class="sectlevel2">
<li><a href="#ecmascript5_aka_es5">1.1. ECMAScript&#160;5 (aka ES5)</a></li>
<li><a href="#ecmascript_2015_akaes6_puises2015">1.2. ECMAScript 2015 (aka&#160;ES6 puis&#160;ES2015)</a></li>
<li><a href="#ecmascript_2016_etc_akaes2016">1.3. ECMAScript 2016, etc. (aka&#160;ES2016)</a></li>
</ul>
</li>
<li><a href="#primitives">2. √âl√©ments de base du langage</a>
<ul class="sectlevel2">
<li><a href="#les_types_de_donn√©es">2.1. Les types de donn√©es</a></li>
<li><a href="#les_variables">2.2. Les variables</a></li>
<li><a href="#les_instructions">2.3. Les instructions</a></li>
<li><a href="#scope">2.4. La port√©e (scope)</a></li>
</ul>
</li>
<li><a href="#string">3. Jongler avec du texte (cha√Ænes de caract√®res)</a>
<ul class="sectlevel2">
<li><a href="#regexp">3.1. Expressions r√©guli√®res (RegExp)</a></li>
</ul>
</li>
<li><a href="#boolean">4. Jongler avec des valeurs vraies ou fausses (bool√©ens)</a></li>
<li><a href="#number">5. Jongler avec des valeurs num√©riques (Number, Math)</a>
<ul class="sectlevel2">
<li><a href="#op√©rations_math√©matiques">5.1. Op√©rations math√©matiques</a></li>
<li><a href="#nan">5.2. Les nombres qui n&#8217;en sont pas (<em>NaN</em>)</a></li>
<li><a href="#convertir_en_nombre">5.3. Convertir en nombre</a></li>
<li><a href="#formater_et_arrondir_des_nombres">5.4. Formater et arrondir des nombres</a></li>
</ul>
</li>
<li><a href="#functions">6. Cr√©er et r√©utiliser des blocs de code (fonctions)</a>
<ul class="sectlevel2">
<li><a href="#anonymous-function">6.1. Les fonctions anonymes</a></li>
<li><a href="#callback">6.2. Les fonctions de rappel (callback)</a></li>
<li><a href="#rest-parameters">6.3. Param√®tres du reste (rest parameters)</a></li>
</ul>
</li>
<li><a href="#array">7. Lister, filtrer et trier des √©l√©ments (Array)</a>
<ul class="sectlevel2">
<li><a href="#cr√©er_des_tableaux_√†_partir_dautres_valeurs">7.1. Cr√©er des tableaux √† partir d&#8217;autres valeurs</a></li>
<li><a href="#array.concat">7.2. Combiner des tableaux</a></li>
<li><a href="#array.forEach">7.3. It√©rer sur les valeurs avec des boucles</a></li>
<li><a href="#array.sort">7.4. Trier les valeurs</a></li>
<li><a href="#array.map">7.5. Transformer les valeurs</a></li>
<li><a href="#array.filter">7.6. Filtrer les valeurs</a></li>
<li><a href="#array.find">7.7. Identifier des valeurs</a></li>
<li><a href="#array-destructuring">7.8. D√©composition de tableau (<em>destructuring</em>)</a></li>
</ul>
</li>
<li><a href="#object">8. Repr√©senter des structures d&#8217;objet et y acc√©der</a>
<ul class="sectlevel2">
<li><a href="#object-destructuring">8.1. D√©composition d&#8217;objet (<em>destructuring</em>)</a></li>
<li><a href="#object.assign">8.2. Combiner des objets</a></li>
<li><a href="#it√©rer_sur_des_objets">8.3. It√©rer sur des objets</a></li>
<li><a href="#identifier_des_valeurs">8.4. Identifier des valeurs</a></li>
</ul>
</li>
<li><a href="#json">9. Lire et √©crire des donn√©es au format JSON</a></li>
<li><a href="#date">10. Interagir avec des dates</a>
<ul class="sectlevel2">
<li><a href="#intl.datetimeformat">10.1. Formatage internationalis√© (Intl.DateTimeFormat)</a></li>
</ul>
</li>
<li><a href="#class">11. Partager une logique avec des objets de m√™me nature (Class)</a>
<ul class="sectlevel2">
<li><a href="#class.method">11.1. M√©thodes d&#8217;instance</a></li>
<li><a href="#class.static">11.2. M√©thodes statiques</a></li>
<li><a href="#object-getset">11.3. Accesseurs et mutateurs</a></li>
<li><a href="#class.extends">11.4. H√©ritage</a></li>
</ul>
</li>
<li><a href="#promise">12. Coordonner des actions asynchrones (Promise)</a>
<ul class="sectlevel2">
<li><a href="#promise.all">12.1. Collection de promesses</a></li>
<li><a href="#async-await">12.2. async/await</a></li>
</ul>
</li>
<li><a href="#conclusion">13. Conclusion</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Passons en revue les variables et structures ECMAScript pour mieux comprendre
ce qui en fait un langage √©l√©gant et moderne.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="ulist">
<div class="title">Sommaire</div>
<ul>
<li>
<p>Qu&#8217;est-ce que JavaScript&#160;?</p>
</li>
<li>
<p>Comprendre l&#8217;√©volution de la sp√©cification ECMAScript</p>
</li>
<li>
<p>Jongler avec les diff√©rentes structures du langage</p>
</li>
<li>
<p>En savoir plus sur des √©l√©ments avanc√©s du langage</p>
</li>
</ul>
</div>
</div>
</div>
<div class="quoteblock abstract">
<blockquote>
<div class="paragraph">
<p>JavaScript est souvent raill√©.
Parce que ce n&#8217;est pas un vrai langage.
Parce qu&#8217;il a √©t√© cr√©√© en 6 jours.
Parce qu&#8217;il n&#8217;est pas orient√© objet.</p>
</div>
<div class="paragraph">
<p>JavaScript est un langage expressif qui a √©norm√©ment gagn√© en maturit√©
depuis les ann√©es 2010.
Il se r√©v√®le parfaitement op√©rationnel d√®s lors que l&#8217;on s&#8217;int√©resse
√† ses fonctionnalit√©s, sans faire de hors-piste.</p>
</div>
<div class="paragraph">
<p>Les types de donn√©es et les m√©thodes de manipulations qu&#8217;elles nous offrent
permettent d&#8217;√©crire un code plus simple, √† lire et √† produire.
Certaines structures de donn√©es nous aident √† mieux organiser nos donn√©es
ainsi qu&#8217;√† mieux les traiter.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="definition">1. Qu&#8217;est-ce que JavaScript ?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Je vais vous pr√©senter plusieurs exemples de code.
Ils ont en commun d&#8217;√™tre tous √©crits en JavaScript.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">intro/ecmascript.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">'use strict';

const baseUrl = 'https://oncletom.io/node.js';
const filePath = `${baseUrl}/package.json`;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cet exemple illustrait la cr√©ation de variables, de cha√Ænes de caract√®res.
Ce sont des fonctionnalit√©s de base de la sp√©cification ECMAScript.</p>
</div>
<div class="listingblock">
<div class="title">intro/web.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">'use strict';

fetch('https://oncletom.io/node.js/package.json')
  .then(response =&gt; response.json())
  .then(pkg =&gt; console.log(`${pkg.name}@${pkg.version}`));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>fetch()</code> ne fait pas partie de la sp√©cification ECMAScript.
C&#8217;est un ajout des navigateurs web.
On parle alors d'<strong>API JavaScript pour le Web</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">üí¨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Glossaire</span> API (Interface de programmation)</div>
<div class="paragraph">
<p>Les API sont des interfaces pour dialoguer avec un programme ou une
ressource informatique.
Elles d√©finissent des vocabulaires pour ex√©cuter des actions sp√©cifiques.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">intro/dom.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">'use strict';

const docBody = document.querySelector('body');
docBody.addEventListener('click', () =&gt; alert('Hello World!'));</code></pre>
</div>
</div>
<div class="paragraph">
<p>La variable <code>document</code> et les m√©thodes <code>querySelector</code> et <code>addEventListener</code>
font aussi partie des API JavaScript pour le Web.
En l&#8217;occurrence, elles font partie de l&#8217;API DOM (<em>Document Object Model</em>),
un m√©canisme pour interagir avec une page web gr√¢ce √† ECMAScript.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">intro/node.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">'use strict';

const {homedir} = require('os');
const fs = require('fs');
fs.readdir(homedir(), (err, files) =&gt; {
  err ? console.error(err) : console.log(files);
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce dernier exemple est sp√©cifique √† Node.
Ce dernier propose la fonction <code>require()</code> pour charger des modules et interagir
avec le syst√®me d&#8217;exploitation.</p>
</div>
<div class="paragraph">
<p>Autrement dit,
<strong>ECMAScript est un langage, une grammaire avec des fonctionnalit√©s de base</strong>.
Chaque environnement&#160;‚Äì les navigateurs web, Node&#160;‚Äì le comprend et lui ajoute
de nouvelles expressions, contextuelles √† cet environnement d&#8217;ex√©cution.
<strong>JavaScript est le grand ensemble des technologies qui reposent sur ECMAScript</strong>
pour fonctionner.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">üí¨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Histoire</span> √Ä propos de JavaScript</div>
<div class="paragraph">
<p>JavaScript est invent√© en 1995 par Brendan&#160;Eich alors qu&#8217;il est employ√© de
la soci√©t√© Netscape Communications.
Microsoft lui embo√Æte le pas en incluant JavaScript dans son logiciel
Internet&#160;Explorer, alors en version&#160;3.
Pour des raisons de droits de marque, il y est d√©nomm√© JScript.</p>
</div>
<div class="paragraph">
<p>La sp√©cification est ensuite valid√©e par l&#8217;organisme <em>Ecma International</em>
en juin 1997 sous le nom d&#8217;ECMAScript, standard ECMA-262.</p>
</div>
<div class="paragraph">
<p>Le terme JavaScript est rest√© dans le vocabulaire courant, mais, en fait,
il s&#8217;agit bien d&#8217;ECMAScript.</p>
</div>
<div class="paragraph">
<p>Adobe Flash utilise un d√©riv√© d&#8217;ECMAScript&#160;: ActionScript.
Bien des machines virtuelles sont capables d&#8217;interpr√©ter partiellement ou
int√©gralement ECMAScript&#160;: Rhino, Konq, BESEN en Object Pascal ou encore
Esprima, qui est elle-m√™me √©crite dans ce langage.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Si d&#8217;autres langages de programmation se cantonnent
soit au c√¥t√© client (VBScript, ActionScript, Elm),
soit au c√¥t√© serveur (Ruby, Python, Haskell),
JavaScript a d√©but√© c√¥t√© client pour s&#8217;√©tendre aussi c√¥t√© serveur.
Un d√©veloppeur ou une d√©veloppeuse dite <em>full&#160;stack</em> programme des applications
sur les deux fronts.
Node a cet avantage d&#8217;unifier le langage de programmation entre les environnements
client et serveur.</p>
</div>
<div class="paragraph">
<p>Le langage ECMAScript&#160;‚Äì appelons-le ainsi √† partir de maintenant&#160;‚Äì
a √©volu√© au fil du temps.
Il s&#8217;est enrichi de nouvelles fonctionnalit√©s au fil des versions, mais aussi
de sucres syntaxiques (raccourcis d&#8217;√©criture)
et de rigueur aussi, pour corriger des d√©fauts de <em>design</em>.</p>
</div>
<div class="paragraph">
<p>Le comit√© de travail TC39 (<em>Technical Committee</em>,
<span class="URL"><a href="https://github.com/tc39" class="bare">github.com/tc39</a></span>) est en charge de l&#8217;√©volution
du langage, standardis√© sous le doux sobriquet de <em>standard ECMA-262</em>,
√† charge ensuite aux diff√©rents impl√©menteurs de suivre les changements
et de les incorporer dans leurs machines virtuelles.</p>
</div>
<div class="paragraph">
<p>Node se base sur la machine virtuelle&#160;<a href="../chapter-01/index.html#v8">V8 de Google</a>
pour interpr√©ter les expressions ECMAScript.
De fait, Node comprend les m√™mes expressions ECMAScript que&#160;V8.</p>
</div>
<div class="paragraph">
<p>Nous verrons un peu plus tard dans ce chapitre comment suivre la
compatibilit√© de Node avec ECMAScript.
Int√©ressons-nous √† l&#8217;√©volution du langage et √† ce que √ßa nous apporte.</p>
</div>
<div class="sect2">
<h3 id="ecmascript5_aka_es5">1.1. ECMAScript&#160;5 (aka ES5)</h3>
<div class="paragraph">
<p>ECMAScript a √©t√© standardis√© dans sa version&#160;5 en d√©cembre&#160;2009.
La r√©vision&#160;5.1 de juin&#160;2011 est une correction mineure de la sp√©cification.</p>
</div>
<div class="paragraph">
<p>Il s&#8217;agit d&#8217;une √©volution majeure dans l&#8217;histoire du langage.
La pr√©c√©dente version&#160;‚Äì ECMAScript&#160;3&#160;‚Äì √©tait √¢g√©e de dix&#160;ans.</p>
</div>
<div class="paragraph">
<p>ECMAScript&#160;5 limite drastiquement certains effets ind√©sirables du langage
gr√¢ce au <em>mode strict</em>.
De nouvelles m√©thodes de manipulation de tableaux et d&#8217;objets voient le jour,
ainsi qu&#8217;une prise en charge native du format de donn√©es&#160;<a href="#json">JSON</a>.</p>
</div>
<div class="paragraph">
<p>La standardisation de cette version d&#8217;ECMAScript a contribu√© √† redorer
l&#8217;image du langage, mais aussi √† faire √©merger de nouvelles pratiques
de programmation.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Table de compatibilit√©
</td>
<td class="hdlist2">
<p><span class="URL"><a href="https://kangax.github.io/compat-table/es5/" class="bare">kangax.github.io/compat-table/es5/</a></span></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Sp√©cification
</td>
<td class="hdlist2">
<p><span class="URL"><a href="https://www.ecma-international.org/ecma-262/5.1/" class="bare">www.ecma-international.org/ecma-262/5.1/</a></span></p>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/compat-table.png" alt="compat table" width="85%">
</div>
<div class="title">Figure 1. Table de compatibilit√©</div>
</div>
</div>
<div class="sect2">
<h3 id="ecmascript_2015_akaes6_puises2015">1.2. ECMAScript 2015 (aka&#160;ES6 puis&#160;ES2015)</h3>
<div class="paragraph">
<p>La sp√©cification ECMAScript&#160;2015 (ES2015) a √©t√© publi√©e en juin&#160;2015.
Elle succ√®de √† ECMAScript&#160;5 apr√®s six ann√©es de gestation.
Cette version a successivement √©t√© appel√©e ECMAScript Harmony, ECMAScript&#160;6,
puis ECMAScript&#160;2015.</p>
</div>
<div class="paragraph">
<p>De nombreuses id√©es ont √©t√© pioch√©es dans le langage
CoffeeScript (<span class="URL"><a href="http://coffeescript.org" class="bare">coffeescript.org</a></span>).
Et surtout, un nouveau type d&#8217;outillage s&#8217;est form√© pour commencer
√† utiliser ce JavaScript du futur avec le compilateur
<em>traceur</em> de Google d√®s&#160;2011 (<span class="URL"><a href="https://github.com/google/traceur-compiler" class="bare">github.com/google/traceur-compiler</a></span>),
puis avec le projet ind√©pendant <em>6to5</em> d√®s&#160;2014.
Ce dernier a √©t√© renomm√© en Babel (<span class="URL"><a href="https://babeljs.io" class="bare">babeljs.io</a></span>)
et son instigateur a par la suite √©t√© embauch√© par Facebook.</p>
</div>
<div class="paragraph">
<p>La pratique de compiler du JavaScript en JavaScript √©tait en rupture
avec ce qui se faisait pr√©c√©demment&#160;:
attendre qu&#8217;une fonctionnalit√© soit adopt√©e par un d√©nominateur commun
de navigateurs web pour s&#8217;en servir.
Cette fois-ci, on pouvait se servir du futur, d√®s aujourd&#8217;hui.</p>
</div>
<div class="paragraph">
<p>De fait, il n&#8217;y a pas eu √† attendre six ans et les diff√©rentes impl√©mentations
pour profiter de ce qu&#8217;il y avait de meilleur.</p>
</div>
<div class="paragraph">
<p>Le prix √† payer&#160;? Un ticket d&#8217;entr√©e plus √©lev√© li√© √† la ma√Ætrise
de l&#8217;outillage associ√©.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Table de compatibilit√© (navigateurs&#160;web)
</td>
<td class="hdlist2">
<p><span class="URL"><a href="https://kangax.github.io/compat-table/es6/" class="bare">kangax.github.io/compat-table/es6/</a></span></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Table de compatibilit√© (Node.js)
</td>
<td class="hdlist2">
<p><span class="URL"><a href="https://node.green/" class="bare">node.green/</a></span></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Sp√©cification
</td>
<td class="hdlist2">
<p><span class="URL"><a href="https://www.ecma-international.org/ecma-262/6.0/" class="bare">www.ecma-international.org/ecma-262/6.0/</a></span></p>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/node-green.png" alt="node green" width="85%">
</div>
<div class="title">Figure 2. Illustration de l&#8217;√©volution de la compatibilit√© ECMAScript au fil des versions de&#160;Node</div>
</div>
</div>
<div class="sect2">
<h3 id="ecmascript_2016_etc_akaes2016">1.3. ECMAScript 2016, etc. (aka&#160;ES2016)</h3>
<div class="paragraph">
<p>Depuis la sortie d&#8217;ECMAScript&#160;2015, l&#8217;intention est de publier une
nouvelle sp√©cification par an, de travailler les fonctionnalit√©s une par une
pour ne pas attendre trop longtemps avant de les ratifier.
En cons√©quence, les nouvelles versions annuelles sont beaucoup plus
incr√©mentales.
Elles se font moins attendre et contiennent moins de grands bouleversements.</p>
</div>
<div class="paragraph">
<p>Les fonctionnalit√©s en cours de pr√©paration sont list√©es
dans le d√©p√¥t GitHub suivant&#160;: <span class="URL"><a href="https://github.com/tc39/proposals" class="bare">github.com/tc39/proposals</a></span>.
Le dernier stade avant la validation est le <em>stage&#160;3</em>.
D√®s qu&#8217;une fonctionnalit√© passe en <em>stage&#160;4</em>, elle est incluse
dans la prochaine version d&#8217;ECMAScript
‚Äì ECMAScript&#160;2018 une fois l&#8217;ann√©e 2018 termin√©e.</p>
</div>
<div class="paragraph">
<p>Les fonctionnalit√©s approuv√©es sont consign√©es dans un document&#160;:
<span class="URL"><a href="https://github.com/tc39/proposals/blob/master/finished-proposals.md" class="bare">github.com/tc39/proposals/blob/master/finished-proposals.md</a></span>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="primitives">2. √âl√©ments de base du langage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cette section d√©crit les notions n√©cessaires
pour s&#8217;approprier le reste des exemples de l&#8217;ouvrage.
On apprendra notamment √† cr√©er des variables, √† naviguer dans
des listes d&#8217;√©l√©ments et √† faire la diff√©rence
entre un objet et une fonction.</p>
</div>
<div class="sect2">
<h3 id="les_types_de_donn√©es">2.1. Les types de donn√©es</h3>
<div class="paragraph">
<p>Qu&#8217;entend-t-on par <em>type de donn√©es</em>&#160;?
Faisons-nous notre propre id√©e avec une suite d&#8217;exemples.
Ces notions seront d√©velopp√©es dans le reste du chapitre,
pour mieux comprendre ce que l&#8217;on peut en faire.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/string.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">'Node.js'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une valeur entour√©e de guillemets est consid√©r√©e
par l&#8217;interpr√©teur ECMAScript comme une cha√Æne de caract√®res, du texte.</p>
</div>
<div class="paragraph">
<p>Ces guillemets sont selon les cas des guillemets simples&#160;('),
doubles (") ou obliques (`).</p>
</div>
<div class="paragraph">
<p>On peut effectuer des op√©rations d&#8217;identification ou d&#8217;assemblage avec une
valeur de type <strong>cha√Æne de caract√®res</strong>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/number.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">3

12.3</code></pre>
</div>
</div>
<div class="paragraph">
<p>ECMAScript consid√®re les entiers (<code>3</code>&#160;dans cet exemple)
et les r√©els (<code>12.3</code>&#160;dans cet exemple) comme des nombres.
Il ne fait <em>pas</em> de distinction entre les&#160;deux.</p>
</div>
<div class="paragraph">
<p>On peut effectuer des op√©rations math√©matiques entre plusieurs
valeurs de type <strong>nombre</strong>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/boolean.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">true

false</code></pre>
</div>
</div>
<div class="paragraph">
<p>ECMAScript consid√®re deux valeurs pour signifier <em>vrai</em> ou <em>faux</em>&#160;:
respectivement <code>true</code> et <code>false</code>.</p>
</div>
<div class="paragraph">
<p>On peut effectuer des op√©rations logiques avec une
valeur de type <strong>bool√©en</strong>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/null.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">null</code></pre>
</div>
</div>
<div class="paragraph">
<p>On utilise <code>null</code> pour signifier l'<strong>absence de valeur</strong>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/undefined.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">undefined</code></pre>
</div>
</div>
<div class="paragraph">
<p>La valeur <code>undefined</code> est utilis√©e pour signifier
qu&#8217;une <strong>valeur</strong> est <strong>inconnue</strong>.
Rares sont les cas o√π on choisira ce type de donn√©es par nous-m√™me.</p>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> primitives</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur primitives.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Data_structures" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Data_structures</a>

</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Il existe trois autres types de donn√©es qui se basent sur ces types
dits <em>primitifs</em>.
Ils sont destin√©s √† ranger, √† classer et √† exprimer de nouvelles valeurs
en fonction d&#8217;autres.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/array.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">[2, 'C', 2, 'G']</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un tableau se d√©clare en encadrant une suite de valeurs entre crochets.
Il est capable de contenir n&#8217;importe quel type de valeurs et autant que n√©cessaire.
L&#8217;ordre des valeurs a g√©n√©ralement une importance.</p>
</div>
<div class="paragraph">
<p>On peut effectuer des op√©rations de tri et de s√©lection avec un
<strong>tableau de valeurs</strong>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/object.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
  title: 'Node.js',
  isbn: '978-2212139938',
  published: true
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un objet se d√©clare en encadrant une suite de <em>paires cl√©/valeur</em>
entre accolades.
Il fonctionne comme un <em>dictionnaire</em>&#160;: on associe une valeur (type au choix)
√† une cl√© (un intitul√©, un label).
L&#8217;ordre des paires n&#8217;a g√©n√©ralement pas d&#8217;importance.</p>
</div>
<div class="paragraph">
<p>On peut effectuer des op√©rations de s√©lection avec un
<strong>objet de valeurs</strong>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/function.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function double(value) {
  return value * 2;
}

double(3);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Une fonction accepte des <em>arguments</em>, de n&#8217;importe quel type et
autant que n√©cessaire.
Elle doit √™tre <em>d√©clar√©e</em> pour √™tre <em>ex√©cut√©e</em>
(derni√®re ligne de l&#8217;exemple pr√©c√©dent).</p>
</div>
<div class="paragraph">
<p>Une fonction <em>retourne</em> un r√©sultat explicite avec le
mot-cl√© <code>return</code>.
Dans le cas contraire, ECMAScript consid√®re
que la valeur retourn√©e √©quivaut implicitement √† <code>undefined</code>.</p>
</div>
<div class="paragraph">
<p>On peut effectuer des op√©rations de transformation avec une fonction.</p>
</div>
<div class="paragraph">
<p>Les fonctions sont destin√©es √† √™tre <em>appel√©es</em>, pour effectuer
des traitements r√©p√©titifs.
D√®s que l&#8217;on doit √©crire deux fois la m√™me chose,
on l&#8217;√©crit dans une fonction qu&#8217;on appelle deux&#160;fois.</p>
</div>
</div>
<div class="sect2">
<h3 id="les_variables">2.2. Les variables</h3>
<div class="paragraph">
<p>Les variables servent √† ranger des valeurs.
On peut ainsi les r√©utiliser plus tard, les transmettre et prendre
des d√©cisions en fonction de ce qu&#8217;elles contiennent.</p>
</div>
<div class="paragraph">
<p>Les variables nous aident √† <em>donner du sens</em> √† notre code,
√† le rendre intelligible par d&#8217;autres personnes
ainsi qu&#8217;√† nommer des choses comme on le ferait dans notre quotidien.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/variables.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const book = {
  title: 'Node.js',
  isbn: '978-2212139938',
  published: true
};

const base_price = 13;

function double(value) {
  return value * 2;
}

book.price = double(base_price);</code></pre>
</div>
</div>
<div class="paragraph">
<p>√Ä votre avis, quel est le prix du livre calcul√© dans
l&#8217;exemple pr√©c√©dent&#160;?
Il suffit de suivre le chemin que prend la nouvelle valeur
rang√©e dans la cl√© <code>price</code> de l&#8217;objet <code>book</code>, calcul√©e par la fonction
<code>double</code> √† laquelle on passe la valeur contenue dans la variable <code>base_price</code>.</p>
</div>
<div class="paragraph">
<p>Le mot-cl√© <code>const</code> nous a servi √† <em>d√©clarer</em> une variable.
On ne peut √©tiqueter ainsi une variable avec le m√™me nom qu&#8217;une seule fois.
L&#8217;exemple suivant g√©n√©rera une erreur lors de la deuxi√®me affectation&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">variables/const.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const base_price = 13;
const base_price = 14;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">üí¨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Question</span> Une variable constante ?</div>
<div class="paragraph">
<p><code>const</code> est un type de variable qui ne peut √™tre ni red√©clar√© ni √™tre r√©affect√©&#160;:
c&#8217;est en √ßa qu&#8217;il est <em>constant</em>.</p>
</div>
<div class="paragraph">
<p>Une variable <code>const</code> n&#8217;emp√™che pas la modification de son contenu, dans le cas
d&#8217;un tableau ou d&#8217;un objet.
La fonction <code>Object.freeze()</code> est une r√©ponse adapt√©e pour garantir son immuabilit√©.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">variables/const-freeze.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const table = ['a', 'b'];

table.push('c');
console.log(table);       <b class="conum">(1)</b>

Object.freeze(table);     <b class="conum">(2)</b>
table.push('d');          <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>[ 'a', 'b', 'c' ]</code>.</p>
</li>
<li>
<p>L&#8217;objet <code>table</code> est gel√© gr√¢ce √† la fonction <code>Object.freeze()</code>.</p>
</li>
<li>
<p>Cette ligne lance une erreur car nous tentons de modifier un objet gel√©.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="les_instructions">2.3. Les instructions</h3>
<div class="paragraph">
<p>Des <em>instructions</em> nous servent √† suivre, √©viter ou r√©p√©ter
des chemins dans notre code.</p>
</div>
<div class="paragraph">
<p>L&#8217;instruction&#160;<code>if</code> ex√©cute du code s&#8217;il remplit une condition.
Cette derni√®re peut √™tre une <em>valeur</em> ou une <em>expression</em> interpr√©t√©e
pour savoir √† quel <em>bool√©en</em> elle correspond.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">instructions/if.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const book = {
  title: 'Node.js',
  published: true
};

if (book.published &amp;&amp; book.title) {
  console.log('Le livre est publi√© (et a un titre)');
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;exemple pr√©c√©dent v√©rifie que les deux conditions sont remplies
(op√©rateur <code>&amp;&amp;</code>) pour afficher un message en cons√©quence.</p>
</div>
<div class="paragraph">
<p>On notera au passage que <code>book.title</code> n&#8217;est pas un bool√©en.
ECMAScript regarde dans ce cas que la cha√Æne de caract√®res
contient <em>au moins un caract√®re</em>.
On expliquera ce comportement plus en d√©tail dans la section
"<a href="#boolean">jongler avec des valeurs vraies ou fausses</a>".</p>
</div>
<div class="paragraph">
<p>L&#8217;instruction&#160;<code>if</code> peut √™tre compl√©t√©e avec l&#8217;instruction <code>else</code>
pour ex√©cuter du code qui r√©pondrait au cas contraire.
Il est possible d&#8217;imbriquer plusieurs <code>else if</code> √† la suite.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">instructions/else-if.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const book = {
  title: 'Node.js',
  published: true
};

if (book.published &amp;&amp; book.title) {
  console.log('Le livre est publi√© avec un titre.');
}
else if (book.published) {
  console.log('Le livre est publi√© (sans titre).');
}
else {
  console.log('Le livre n\'est pas publi√©.');
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre exemple n&#8217;empruntera qu&#8217;un seul des chemins, mais on constate
qu&#8217;on pourrait en emprunter un autre
en modifiant la valeur des cl√©s <code>title</code> et <code>published</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="scope">2.4. La port√©e (scope)</h3>
<div class="paragraph">
<p>La <em>port√©e</em> est un concept tr√®s pr√©sent dans ECMAScript.
On y fait souvent r√©f√©rence en parlant de <em>variable globale</em>&#160;et
de <em>variable locale</em>.
C&#8217;est une sorte de fronti√®re d&#8217;acc√®s √† la valeur
d&#8217;une variable.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">scopes/local.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function secret(){
  const mot = 'devinette';

  return 'None shall pass';
}

console.log(secret());
console.log(mot);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans cet exemple, la variable <code>secret</code> de type fonction a une port√©e globale au script.
En revanche, la variable <code>mot</code> est d√©finie dans la fonction <code>secret</code>
et n&#8217;est donc pas accessible en dehors de la port√©e de la fonction.
√Ä l&#8217;inverse, ce qui est d√©fini <em>en dehors</em> d&#8217;une fonction
est accessible <em>√† l&#8217;int√©rieur</em> d&#8217;une fonction.</p>
</div>
<div class="paragraph">
<p>La port√©e de la variable <code>mot</code> est locale √† la fonction <code>secret</code>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">scopes/global.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const year = 2018;

function next(value) {
  return value + 1;
}

function nextYear() {
  return next(year);
}

console.log(year);
console.log(nextYear());
console.log(value);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici, nous illustrons la port√©e globale de la variable
<code>year</code>.
Elle est d√©finie un cran au-dessus des fonctions <code>next</code> et <code>nextYear</code>.
On peut y acc√©der, comme en atteste le code de la fonction <code>nextYear</code>.</p>
</div>
<div class="paragraph">
<p>√Ä l&#8217;inverse, la variable <code>value</code> a une port√©e locale
‚Äì elle est pass√©e en param√®tre de la fonction <code>next</code>.
ECMAScript g√©n√®rera une erreur si on tente
d&#8217;y acc√©der en dehors de sa port√©e.</p>
</div>
<div class="paragraph">
<p><strong>La port√©e est d√©limit√©e par les fonctions</strong>.
En l&#8217;absence de fonction, la port√©e maximale est celle du module (script)
dans lequel la variable est d√©clar√©e.</p>
</div>
<div class="paragraph">
<p>Il existe un deuxi√®me type de port√©e&#160;: la <em>port√©e lexicale</em>.
L&#8217;exemple suivant servira √† illustrer la nature de sa d√©limitation.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">scopes/lexical.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const book = {
  title: 'Node.js',
  published: true
};

if (book.published) {
  const price = 32;

  console.log(`Le livre ${book.title} co√ªte ${price}‚Ç¨.`);
}

console.log(`Le livre ${book.title} co√ªte ${price}‚Ç¨.`);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le mot-cl√© <code>const</code> cr√©e une variable certes,
mais une variable dont la port√©e est <em>lexicale</em>.
<strong>La port√©e lexicale est d√©limit√©e par le bloc d&#8217;instructions</strong>
dans lequel la variable est d√©clar√©e.</p>
</div>
<div class="paragraph">
<p>Ainsi, la variable <code>price</code> n&#8217;existe que dans le cadre du bloc <code>if</code>.</p>
</div>
<div class="paragraph">
<p>La port√©e lexicale sert √† d√©clarer des variables sans "polluer" le reste du script,
pour que son existence soit oubli√©e aussit√¥t le bloc ex√©cut√©.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="string">3. Jongler avec du texte (cha√Ænes de caract√®res)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Il est commun d&#8217;avoir √† travailler avec des cha√Ænes de caract√®res.
Elles servent √† stocker des URL, des titres, des identifiants,
des tweets, des messages et des textes longs, entre autres.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/base.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">// Utilisation de guillemets simples
console.log('L\'apr√®s-midi\nLe soir');  <b class="conum">(1)</b>

// Utilisation de guillemets doubles
console.log("L'apr√®s-midi\nLe soir");   <b class="conum">(2)</b>

// Utilisation de guillemets obliques
console.log(`L'apr√®s-midi
Le soir`);                              <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Utilisation de guillemets simples (<code>\n</code> sert √† revenir √† la ligne).</p>
</li>
<li>
<p>Utilisation de guillemets doubles&#160;: √©vite d&#8217;√©chapper le guillemet simple.</p>
</li>
<li>
<p>Utilisation de guillemets obliques&#160;: autorise l&#8217;√©criture sur plusieurs lignes.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Tous les caract√®res sont utilisables&#160;: lettres, chiffres,
caract√®res accentu√©s, √©mojis et m√™me des sinogrammes ou des kanjis.
Autrement dit, il n&#8217;y a pas de limite.
Les environnements d&#8217;ex√©cution se repr√©sentent les caract√®res au format
UTF-16 (tables de stockage Unicode sur 16&#160;bits de donn√©es).</p>
</div>
<div class="paragraph">
<p>Il est fr√©quent d&#8217;avoir √† <em>concat√©ner</em> des cha√Ænes de caract√®res,
ou √† les composer √† partir d&#8217;une autre variable.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/concat.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const mot = 'pot';

console.log(`${mot} de colle`);
console.log(`${mot} de fleur`);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Toute cha√Æne de caract√®res offre un ensemble
d'<em>attributs</em> (<code>.quelque-chose</code>)
et de <em>m√©thodes</em> (<code>.autre-chose()</code>) pour en savoir plus
sur la cha√Æne mais aussi pour la transformer.</p>
</div>
<div class="paragraph">
<p>Par exemple, on conna√Æt la longueur d&#8217;une cha√Æne via son attribut <code>length</code>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/length.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">console.log('I ‚ô• JavaScript'.length); <b class="conum">(1)</b>
console.log(''.length);               <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>14</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>0</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On acc√®de √† un caract√®re sp√©cifique en utilisant
la cha√Æne comme un tableau, ou √† l&#8217;aide d&#8217;une m√©thode d√©di√©e&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/char-at.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const mot = 'Node.js';

console.log(mot[0]);        <b class="conum">(1)</b>
console.log(mot.charAt(1)); <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>N</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>o</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">üö®</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Attention</span></div>
<div class="paragraph">
<p>Le premier caract√®re d&#8217;une cha√Æne est √† l&#8217;index&#160;0 et non pas √†&#160;1.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Deux autres fonctions transforment
un texte en lettres minuscules ou majuscules&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/lower-upper-case.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const mot = 'Node.js';

console.log(mot.toLocaleLowerCase()); <b class="conum">(1)</b>
console.log(mot.toLocaleUpperCase()); <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>node.js</code>.</p>
</li>
<li>
<p>Affiche <code>NODE.JS</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>D&#8217;autres fonctions nettoient ou compl√®tent les espaces autour,
au d√©but ou √† la fin d&#8217;une cha√Æne de caract√®res&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/trim-pad.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const mot = '  Node.js  ';

console.log(mot.trim());      <b class="conum">(1)</b>
console.log(mot.trimLeft());  <b class="conum">(2)</b>
console.log(mot.trimRight()); <b class="conum">(3)</b>

const swiftCode = 'BARCGB22';

console.log(swiftCode.padEnd(11, 'X')); <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>Node.js</code>.</p>
</li>
<li>
<p>Affiche <code>Node.js&#160;&#160;</code>.</p>
</li>
<li>
<p>Affiche <code>&#160;&#160;Node.js</code>.</p>
</li>
<li>
<p>Affiche <code>BARCGB22XXX</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Dans cet exemple, la m√©thode <code>padEnd</code> compl√®te jusqu&#8217;√† <code>11</code>&#160;caract√®res,
avec la lettre <code>X</code>.
La m√©thode <code>padStart</code> fait la m√™me chose mais avec le d√©but de la cha√Æne.</p>
</div>
<div class="paragraph">
<p><code>indexOf</code> retourne la position de la <em>premi√®re occurrence</em> dans une cha√Æne
d&#8217;une sous-cha√Æne pass√©e en param√®tre.
Si la valeur n&#8217;est pas trouv√©e, la m√©thode renvoie la valeur&#160;<code>-1</code>.
√Ä l&#8217;inverse, <code>lastIndexOf</code> retournera la derni√®re occurrence trouv√©e&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/index-of.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">console.log('I ‚ô• JavaScript'.indexOf('JavaScript')); <b class="conum">(1)</b>
console.log('I ‚ô• JavaScript'.indexOf('?'));          <b class="conum">(2)</b>
console.log('I ‚ô• JavaScript'.indexOf('a'));          <b class="conum">(3)</b>
console.log('I ‚ô• JavaScript'.lastIndexOf('a'));      <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Retourne&#160;<code>4</code>.</p>
</li>
<li>
<p>Retourne&#160;<code>-1</code>&#160;‚Äì aucune occurrence n&#8217;a √©t√© trouv√©e.</p>
</li>
<li>
<p>Retourne&#160;<code>5</code>&#160;‚Äì premi√®re occurrence de la lettre&#160;<code>a</code>.</p>
</li>
<li>
<p>Retourne&#160;<code>7</code>&#160;‚Äì derni√®re occurrence de la lettre&#160;<code>a</code>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="regexp">3.1. Expressions r√©guli√®res (RegExp)</h3>
<div class="paragraph">
<p>Si <code>indexOf</code> et <code>lastIndexOf</code> identifient des caract√®res exacts,
comment faire lorsque l&#8217;on souhaite chercher de mani√®re approximative,
plusieurs fois et selon certaines conditions&#160;?</p>
</div>
<div class="paragraph">
<p>Les <em>expressions r√©guli√®res</em> (<em>RegExp</em>, pour <em>Regular Expressions</em>)
entrent en jeu dans ces cas plus avanc√©s.
Leur m√©canisme d√©crit des <em>motifs</em> √† identifier.
Plusieurs <em>m√©thodes</em> servent ensuite √† tester, identifier et remplacer
ces motifs au sein d&#8217;une cha√Æne de caract√®res.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">üí°</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Anecdote</span> RegExp et Perl</div>
<div class="paragraph">
<p>La syntaxe d&#8217;expressions r√©guli√®res est inspir√©e de celle du langage
de programmation Perl (<span class="URL"><a href="https://www.perl.org" class="bare">www.perl.org</a></span>) dans sa version&#160;5.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Une expression r√©guli√®re est d√©crite le plus souvent en tant que motif
encadr√© par des barres obliques, suffix√© d'<em>options</em> exprim√©es sous forme de lettres&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/base.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">/[a-z]+.js/i</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cet exemple utilise l&#8217;option&#160;<code>i</code> mais il en existe plusieurs&#160;:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Insensible √† la casse&#160;(<code>i</code>)
</td>
<td class="hdlist2">
<p>On souhaite identifier du contenu, peu importe s&#8217;il est en majuscules ou non.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Multi-ligne&#160;(<code>m</code>)
</td>
<td class="hdlist2">
<p>La recherche s&#8217;effectue sur <em>toutes</em> les lignes.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Global&#160;(<code>g</code>)
</td>
<td class="hdlist2">
<p>La recherche identifie <em>tous</em> les r√©sultats&#160;‚Äì au lieu du seul premier.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Unicode&#160;(<code>u</code>)
</td>
<td class="hdlist2">
<p>S&#8217;utilise si le motif de recherche exprime des s√©quences de caract√®res
Unicode sous la forme&#160;<code>\u{&#8230;&#8203;}</code> (voir les <em>classes de caract√®res</em> ci-apr√®s).</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Illustrons leur utilisation en <em>identifiant du texte</em> r√©pondant (<code>match</code>)
√† une <em>expression r√©guli√®re</em>&#160;(<code>/&#8230;&#8203;/</code>)&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/flags.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const text = 'I ‚ô• Node.js &amp; Anode';

console.log(text.match(/node/i));   <b class="conum">(1)</b>
console.log(text.match(/ode/g));    <b class="conum">(2)</b>
console.log(text.match(/node/ig));  <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Identifie et affiche <code>Node</code>, l&#8217;occurrence contenue dans le mot <code>Node.js</code>.</p>
</li>
<li>
<p>Affiche deux fois <code>ode</code>&#160;‚Äì les occurrences contenues dans les mots <code>Node.js</code> et <code>Anode</code>.</p>
</li>
<li>
<p>Affiche <code>Node</code> et <code>node</code> en combinant les deux options&#160;<code>i</code> et&#160;<code>g</code>&#160;‚Äì les occurrences contenues dans les mots <code>Node.js</code> et <code>Anode</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Des √©l√©ments de syntaxe compl√®tent les options pour
identifier des motifs au sein de cha√Ænes de caract√®res&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ensemble de caract√®res (entre&#160;<code>[</code>&#160;et&#160;<code>]</code>)</dt>
<dd>
<p>Liste l&#8217;ensemble des caract√®res recherch√©s.
Le caract√®re&#160;<code>-</code> indique une plage de caract√®res.
(ex. <code>[a-d]</code> correspond √† <code>[abcd]</code>, donc <em>a</em> ou&#160;_b_ ou&#160;_c_&#160;ou&#160;_d_).</p>
</dd>
<dt class="hdlist1">Nombre de caract√®res (entre&#160;<code>{</code>&#160;et&#160;<code>}</code>)</dt>
<dd>
<p>R√©p√®te un caract√®re ou une sous-cha√Æne&#160;;
<em>exactement</em> (<code>{2}</code>&#160;‚Äì exactement deux fois),
<em>au moins</em> (<code>{2,}</code>&#160;‚Äì au moins deux fois)
ou <em>entre</em> (<code>{1,2}</code>&#160;‚Äì entre une et deux fois).</p>
</dd>
<dt class="hdlist1">Nombre de caract√®res (<code>?</code>,&#160;<code>+</code>&#160;et&#160;<code>*</code>)</dt>
<dd>
<p>Version raccourcie du nombre de caract√®res pour des besoins usuels&#160;:
0&#160;ou&#160;1 caract√®re avec&#160;<code>?</code>,
1 caract√®re et plus avec&#160;<code>+</code> et
0 caract√®re et plus avec&#160;<code>*</code>.</p>
</dd>
</dl>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/syntax.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const paris15 = '75015 Paris';
const avray = '92410 Ville-d\'Avray';

// test du code postal uniquement
console.log(paris15.match(/[0-9]{2}/));          <b class="conum">(1)</b>
console.log(paris15.match(/[0-9]{2,5}/));        <b class="conum">(2)</b>

// test du code postal et de la ville
console.log(paris15.match(/[0-9]{5} [a-zA-Z]+/)); <b class="conum">(3)</b>
console.log(paris15.match(/[0-9]{5} [a-z]+/i));   <b class="conum">(4)</b>

// test sur un nom de ville compos√©
console.log(avray.match(/[0-9]{5} [a-z]+/i));     <b class="conum">(5)</b>
console.log(avray.match(/[0-9]{5} [a-z'-]+/i));   <b class="conum">(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["75"]</code>&#160;‚Äì les 2&#160;premiers caract√®res num√©riques de la cha√Æne.</p>
</li>
<li>
<p>Affiche <code>["75015"]</code>&#160;‚Äì les 5&#160;premiers caract√®res num√©riques (satisfait la condition&#160;<code>5</code> de&#160;<code>{2,5}</code>).</p>
</li>
<li>
<p>Affiche <code>["75015 Paris"]</code>.</p>
</li>
<li>
<p>Affiche <code>["75015 Paris"]</code>&#160;‚Äì l&#8217;option&#160;<code>i</code> √©vite de pr√©ciser l&#8217;ensemble&#160;<code>A-Z</code>.</p>
</li>
<li>
<p>Affiche <code>["92410 Ville"]</code>&#160;‚Äì capture les caract√®res jusqu&#8217;√† ce que la condition ne soit plus remplie en rencontrant le trait d&#8217;union&#160;(<code>-</code>).</p>
</li>
<li>
<p>Affiche <code>["92410 Ville-d&#8217;Avray"]</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>D&#8217;autres op√©rateurs d√©limitent notre recherche&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">D√©but et fin de cha√Æne (<code>^</code>&#160;et&#160;<code>$</code>)</dt>
<dd>
<p>Quand l&#8217;option multi-ligne (<code>m</code>) est utilis√©e, les notions de d√©but
et de fin s&#8217;appliquent au niveau de la ligne.</p>
</dd>
<dt class="hdlist1">Limite de mot&#160;(<code>\b</code>)</dt>
<dd>
<p>Symbolise tout caract√®re ne faisant pas partie d&#8217;un mot, y compris le d√©but
ou la fin d&#8217;une cha√Æne.</p>
</dd>
<dt class="hdlist1">Ou&#160;(<code>|</code>)</dt>
<dd>
<p>S√©pare deux choix (ex. <code>/noir|blanc/</code>).</p>
</dd>
<dt class="hdlist1">Groupe de capture (entre&#160;<code>(</code>&#160;et&#160;<code>)</code>)</dt>
<dd>
<p>D√©limite un groupe de caract√®res.
Les groupes peuvent par la suite √™tre <em>identifi√©s</em> et <em>remplac√©s</em>.<br>
On notera √©galement que l&#8217;emploi des <em>groupes</em> change
la structure des r√©sultats en un tableau de plusieurs √©l√©ments,
de la forme <code>["cha√Æne identifi√©e", "groupe 1", "groupe 2" &#8230;&#8203;]</code>.</p>
</dd>
</dl>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/limits.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const postcode = '75015 Paris';
const cedex = `CODEPOSTAL VILLE CEDEX
33900 Bordeaux Cedex 9
33074 BORDEAUX CEDEX
33700 MERIGNAC Cidex 40`;

const nogroup = /^[0-9]{5} [a-z0-9' -]+/i;
const group = /^([0-9]{5}) [a-z0-9' -]+/i;

// avec ou sans groupe de capture
console.log(postcode.match(nogroup));         <b class="conum">(1)</b>
console.log(postcode.match(group));           <b class="conum">(2)</b>

// mode multiligne avec ou sans option globale
console.log(cedex.match(/^([0-9]{5})/im));    <b class="conum">(3)</b>
console.log(cedex.match(/^([0-9]{5})/gim));   <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["75015 Paris"]</code>.</p>
</li>
<li>
<p>Affiche <code>["75015 Paris", "75015"]</code>&#160;‚Äì le premier √©l√©ment correspond √† la cha√Æne identifi√©e tandis que le second correspond au <em>premier</em> groupe de capture.</p>
</li>
<li>
<p>Affiche <code>["33900", "33900"]</code>&#160;‚Äì l&#8217;option multi-ligne it√®re de ligne en ligne jusqu&#8217;√† trouver un motif.</p>
</li>
<li>
<p>Affiche <code>["33900", "33074", "33700"]</code>&#160;‚Äì l&#8217;option multi-ligne globale retourne tous les groupes de capture.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On notera qu&#8217;il faut faire attention √† ce que l&#8217;on regarde&#160;:
le format de r√©sultat varie selon qu&#8217;on utilise ou non des groupes de capture et
selon qu&#8217;on utilise l&#8217;option globale ou multi-ligne.</p>
</div>
<div class="paragraph">
<p>Des symboles servent de raccourcis pour d√©signer
plusieurs caract√®res simultan√©ment&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Tout caract√®re&#160;(<code>.</code>)</dt>
<dd>
<p>tout caract√®re sauf le saut de ligne.</p>
</dd>
<dt class="hdlist1">Caract√®re de mot&#160;(<code>\w</code>)</dt>
<dd>
<p>Tout caract√®re pouvant composer un mot anglais&#160;:
les caract√®res accentu√©s ne sont pas englob√©s
(identique √† <code>[A-Za-z0-9_]</code>).</p>
</dd>
<dt class="hdlist1">Caract√®re num√©rique&#160;(<code>\d</code>)</dt>
<dd>
<p>Identique √†&#160;<code>[0-9]</code>.</p>
</dd>
<dt class="hdlist1">Caract√®re d&#8217;espacement&#160;(<code>\s</code>)</dt>
<dd>
<p>Tout caract√®re d&#8217;espacement&#160;: espace, tabulation, retour chariot, etc.</p>
</dd>
<dt class="hdlist1">Caract√®re Unicode&#160;(<code>\u{&#8230;&#8203;}</code>)</dt>
<dd>
<p>Doit √™tre combin√© avec l&#8217;option&#160;<code>u</code> (<code>/&#8230;&#8203;/u</code>).
Exemple&#160;: ‚ô•Ô∏é&#160;&#8594;&#160;<code>\u{2665}</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Les alternatives de classes en majuscules sont des <em>n√©gations</em>.
<code>\W</code>&#160;pour "tout sauf un caract√®re de mot", <code>\S</code>&#160;pour "tout sauf un caract√®re
d&#8217;espacement", etc.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/classes.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const text = 'I ‚ô• RegExp in 2018';
console.log(text.match(/\u{2665} (\w+)/u));   <b class="conum">(1)</b>

const [,iLove,year] = text.match(/^(I \u{2665}).+(\d{4})$/u);
console.log(`${iLove} ${year}`);              <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["‚ô• RegExp", "RegExp"]</code>&#160;‚Äì et s&#8217;arr√™te l√† car l&#8217;espace suivant n&#8217;est pas un caract√®re de&#160;mot.</p>
</li>
<li>
<p>Affiche <code>"I ‚ô• 2018"</code>&#160;‚Äì on a extrait le d√©but de la phrase et l&#8217;ann√©e plac√©e en fin de cha√Æne.</p>
</li>
</ol>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Expressions r√©guli√®res</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur Expressions r√©guli√®res.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/RegExp" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/RegExp</a>

</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La m√©thode <code>test</code> est pratique si la seule chose qui vous int√©resse
est de tester si une cha√Æne correspond √† un motif&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/test.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const cedex = `CODEPOSTAL VILLE CEDEX
33900 Bordeaux Cedex 9
33074 BORDEAUX CEDEX
33700 MERIGNAC Cidex 40`;

const postcode_tester = /^\d{5}\s/m;

if (postcode_tester.test(cedex)) {
  console.log(cedex.match(/^(\d{5})\b/gm));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enfin, la m√©thode <code>replace</code> est tr√®s utile pour transformer des cha√Ænes de
caract√®res, surtout en combinaison avec les groupes de capture&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/replace.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const t = 'I ‚ô• JavaScript';

console.log(t.replace('‚ô•', 'love'));    <b class="conum">(1)</b>
console.log(t.replace(/\b\w+$/, 'PHP'));<b class="conum">(2)</b>

const text = t.replace(/^.+(\u{2665}) (\w+)$/u, '$2 $1 me');
console.log(text);                      <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"I love JavaScript"</code>&#160;‚Äì si le premier argument de <code>replace</code> est une cha√Æne, elle est convertie automatiquement en expression r√©guli√®re.</p>
</li>
<li>
<p>Affiche <code>"I ‚ô• PHP"</code>.</p>
</li>
<li>
<p>Affiche <code>JavaScript ‚ô• me"</code>&#160;‚Äì les symboles <code>$&lt;num√©ro&gt;</code> repr√©sentent les groupes de capture, qu&#8217;on place dans l&#8217;ordre de notre choix.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le second argument accepte une <a href="#functions">fonction</a>
pour proc√©der √† des remplacements dynamiques&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/replace-function.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const text = 'I ‚ô• JavaScript';

const shout = text.replace(/\b(\w+)$/u, (pattern, lang) =&gt; {
  return lang.toLocaleUpperCase();
});

console.log(shout);   <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"I ‚ô• JAVASCRIPT"</code>&#160;‚Äì le dernier mot est transform√© en majuscules.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="boolean">4. Jongler avec des valeurs vraies ou fausses (bool√©ens)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Un bool√©en est un √©l√©ment logique dont la valeur est soit <code>true</code> soit <code>false</code>,
c&#8217;est-√†-dire respectivement <em>vrai</em> ou <em>faux</em>.
Ce type de valeur sert √† exprimer des r√©sultats de condition
("si&#160;√ßa alors&#160;‚Ä¶ sinon") ainsi qu&#8217;√† affirmer ou infirmer quelque chose.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">boolean/base.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const counter = 3;

console.log(counter);               <b class="conum">(1)</b>
console.log(counter === 3);         <b class="conum">(2)</b>

const check = (counter === 3);

console.log(check);                 <b class="conum">(3)</b>
console.log(check === true);        <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>3</code>.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì la condition est v√©rifi√©e.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì c&#8217;est la valeur de la variable <code>check</code> suite √† son affectation √† la ligne pr√©c√©dente.</p>
</li>
<li>
<p>Affiche <code>true</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Une donn√©e d&#8217;un autre type peut √™tre convertie en bool√©en.
La logique qui d√©terminera si la conversion retournera <code>true</code> ou <code>false</code>
est la suivante&#160;:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>true</code>
</td>
<td class="hdlist2">
<p>Toute valeur non&#160;nulle.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>false</code>
</td>
<td class="hdlist2">
<p>Toute valeur nulle (<code>null</code>, <code>0</code>,&#160;<code>NaN</code>), vide (<code>''</code>)
ou ind√©finie (<code>undefined</code>).</p>
</td>
</tr>
</table>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">boolean/convert.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const counter = 3;

console.log(Boolean(''));       <b class="conum">(1)</b>
console.log(Boolean(counter));  <b class="conum">(2)</b>
console.log(Boolean([]));       <b class="conum">(3)</b>

if (counter) {
  console.log('if (counter) √©quivaut √† if (Boolean(counter))');
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>false</code>&#160;‚Äì il s&#8217;agit d&#8217;une cha√Æne&#160;vide.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì il s&#8217;agit d&#8217;une valeur non&#160;nulle.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì le tableau est vide mais l&#8217;objet en lui-m√™me <em>vaut</em> quelque chose&#160;: un tableau.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="number">5. Jongler avec des valeurs num√©riques (Number, Math)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ECMAScript ne fait pas de distinction entre des entiers et des
nombres contenant des d√©cimales&#160;: ce sont des <em>nombres</em> un point c&#8217;est tout.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/base.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">console.log(40);
console.log(40.0);

console.log(40 === 40.0);   <b class="conum">(1)</b>
console.log(40 === '40.0'); <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>true</code>&#160;‚Äì les deux valeurs sont strictement √©quivalentes.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;‚Äì un √©l√©ment entre guillemets est une cha√Æne de caract√®res, pas un nombre.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Les nombres sont repr√©sent√©s par d√©faut en <em>base&#160;10</em>.
La plage de nombres utilisable dans un programme est d√©finie par des
constantes ECMAScript&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/constants.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">console.log(Number.POSITIVE_INFINITY);  <b class="conum">(1)</b>
console.log(Number.NEGATIVE_INFINITY);  <b class="conum">(2)</b>

console.log(Number.MAX_VALUE);          <b class="conum">(3)</b>
console.log(Number.MIN_VALUE);          <b class="conum">(4)</b>

console.log(Number.MAX_SAFE_INTEGER);   <b class="conum">(5)</b>
console.log(Number.MIN_SAFE_INTEGER);   <b class="conum">(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>Infinity</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>-Infinity</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>1.7976931348623157e+308</code>&#160;‚Äì le plus grand r√©el utilisable.</p>
</li>
<li>
<p>Affiche&#160;<code>5e-324</code>&#160;‚Äì le plus petit r√©el utilisable.</p>
</li>
<li>
<p>Affiche&#160;<code>9007199254740991</code>&#160;‚Äì le plus grand entier utilisable.</p>
</li>
<li>
<p>Affiche&#160;<code>-9007199254740991</code>&#160;‚Äì le plus petit entier utilisable.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Il est aussi possible de compter dans d&#8217;autres bases, notamment en hexad√©cimal
(<em>base&#160;16</em>).
Cette derni√®re est exprim√©e en pr√©fixant la valeur par&#160;<code>0x</code> et avec les
caract√®res de&#160;0 √†&#160;F&#160;‚Äì 0&#160;√†&#160;9 puis A (vaut&#160;10),
B (vaut&#160;11), etc.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/hexa.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">console.log(0x0000);  <b class="conum">(1)</b>
console.log(0x000A);  <b class="conum">(2)</b>
console.log(0x00A0);  <b class="conum">(3)</b>
console.log(0x0A00);  <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>0</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>10</code>&#160;‚Äì car <code>A</code>&#160;en hexad√©cimal vaut&#160;10 en d√©cimal.</p>
</li>
<li>
<p>Affiche&#160;<code>160</code>&#160;‚Äì pour <code>10√ó16</code> (une &#8220;dizaine&#8221; vaut&#160;16).</p>
</li>
<li>
<p>Affiche&#160;<code>2560</code>&#160;‚Äì pour <code>10√ó16√ó16</code> (une &#8220;centaine&#8221; vaut&#160;16√ó16).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Test "ah".</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">üí¨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Rumeur</span> JavaScript est nul en virgule flottante !</div>
<div class="paragraph">
<p>ECMAScript est souvent d√©cri√© pour son incapacit√© √† g√©rer les op√©rations
math√©matiques avec pr√©cision.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">0.2 + 0.6</code></pre>
</div>
</div>
<div class="paragraph">
<p>ECMAScript respecte le standard <em>IEEE&#160;754</em> de gestion de nombres √† virgule
flottante sur 64&#160;bits de donn√©es.
Qui d&#8217;autre l&#8217;utilise&#160;?
D&#8217;autres langages "inconnus" comme Python, PHP et Ruby, entre autres.</p>
</div>
<div class="paragraph">
<p>Pour en savoir plus&#160;: <span class="URL"><a href="https://fr.wikipedia.org/wiki/IEEE_754" class="bare">fr.wikipedia.org/wiki/IEEE_754</a></span>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="op√©rations_math√©matiques">5.1. Op√©rations math√©matiques</h3>
<div class="paragraph">
<p>Les nombres s&#8217;utilisent pour effectuer des op√©rations math√©matiques.
Chaque op√©ration est dot√©e d&#8217;un symbole&#160;:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Op√©ration</th>
<th class="tableblock halign-left valign-top">Symbole</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">addition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">soustraction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">multiplication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">division</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modulo (reste de division)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">exposant (puissance)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>**</code></p></td>
</tr>
</tbody>
</table>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/operations.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">console.log(2 + 4);     <b class="conum">(1)</b>
console.log(2 - 4);     <b class="conum">(2)</b>
console.log(2 * 4);     <b class="conum">(3)</b>
console.log(2 / 4);     <b class="conum">(4)</b>
console.log(2 % 4);     <b class="conum">(5)</b>
console.log(2 ** 4);    <b class="conum">(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>6</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>-2</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>8</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>0.5</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>2</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>16</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="nan">5.2. Les nombres qui n&#8217;en sont pas (<em>NaN</em>)</h3>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">‚ö†Ô∏è</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Attention</span> Op√©rations exotiques</div>
<div class="paragraph">
<p>Est-ce que vous avez d√©j√† tent√© d&#8217;additionner un nombre avec un tableau&#160;?
Pas forc√©ment, mais ECMAScript ne vous en emp√™chera pas.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/operations-types.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">console.log(10 / '1');    <b class="conum">(1)</b>
console.log(10 / 0);      <b class="conum">(2)</b>
console.log(10 / []);     <b class="conum">(3)</b>
console.log(10 / {});     <b class="conum">(4)</b>
console.log(10 + null);   <b class="conum">(5)</b>
console.log(10 + true);   <b class="conum">(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La cha√Æne&#160;<code>'1'</code> sera convertie en nombre (voir plus loin).</p>
</li>
<li>
<p>On nous a toujours interdit la division par z√©ro&#160;; ici, on affiche&#160;<code>Infinity</code>.</p>
</li>
<li>
<p>Affiche aussi&#160;<code>Infinity</code>.</p>
</li>
<li>
<p>Seule cette op√©ration retourne&#160;<code>NaN</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>10</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>11</code>&#160;‚Äî la valeur <code>true</code> est implicitement convertie en un entier.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Certaines op√©rations n&#8217;aboutiront pas mais n&#8217;afficheront pas d&#8217;erreur pour autant.
Dans ce cas, leur r√©sultat vaudra <code>NaN</code> pour <em>not&#160;a&#160;number</em>
(litt√©ralement&#160;: "n&#8217;est pas un nombre").</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/nan.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">console.log(10 / 'fromage');</code></pre>
</div>
</div>
<div class="paragraph">
<p>La fonction <code>Number.isNaN</code> nous aidera √† v√©rifier si la valeur d&#8217;une variable
ou le r√©sultat d&#8217;une op√©ration est un&#160;<code>NaN</code> ou non.
Cette fonction retourne un <a href="#boolean">bool√©en</a>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/is-nan.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">console.log(Number.isNaN(NaN));             <b class="conum">(1)</b>
console.log(Number.isNaN(10 / 'fromage'));  <b class="conum">(2)</b>

console.log(Number.isNaN(10));              <b class="conum">(3)</b>
console.log(Number.isNaN('fromage'));       <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>true</code>.</p>
</li>
<li>
<p>Affiche <code>true</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">üö®</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Assertion</span> <code>NaN</code> n&#8217;est pas un nombre ?</div>
<div class="paragraph">
<p>Il faut se m√©fier de <code>NaN</code> comme de la peste, car il est consid√©r√©
comme un nombre du point de vue d&#8217;ECMAScript.
Toute op√©ration math√©matique impliquant&#160;<code>NaN</code> renverra un&#160;<code>NaN</code>&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/nan-number.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">console.log(typeof NaN);  <b class="conum">(1)</b>
console.log(typeof 10);   <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>'number'</code>.</p>
</li>
<li>
<p>Affiche <code>'number'</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Il vaut mieux s&#8217;assurer qu&#8217;une variable est √† la fois un nombre et
qu&#8217;elle ne vaut pas&#160;<code>NaN</code>&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/is-not-a-nan.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const result = 10 / 'fromage';

if (typeof result === 'number' &amp;&amp; !Number.isNaN(result)) {
  console.log('Ceci est un nombre.');
}
else {
  console.log('result n\'est pas un nombre.');
}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="convertir_en_nombre">5.3. Convertir en nombre</h3>
<div class="paragraph">
<p>Les lignes qui pr√©c√©dent l&#8217;√©voquent un peu&#160;: on peut passer d&#8217;autres types
de donn√©es √† des nombres.
Id√©alement, on voudra transformer explicitement quelque chose en un nombre.</p>
</div>
<div class="paragraph">
<p>Pour cela nous avons deux fonctions √† disposition&#160;:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>parseInt</code>
</td>
<td class="hdlist2">
<p>Essaie d&#8217;interpr√©ter un nombre entier.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>parseFloat</code>
</td>
<td class="hdlist2">
<p>Essaie d&#8217;interpr√©ter un nombre √† virgule.
La fonction s&#8217;arr√™te d√®s qu&#8217;elle n&#8217;a plus affaire √† un chiffre.</p>
</td>
</tr>
</table>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/parse.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">console.log(parseInt('3.141592653589793'));   <b class="conum">(1)</b>
console.log(parseFloat('3.141592653589793')); <b class="conum">(2)</b>

console.log(parseInt('14.10-patch.2'));   <b class="conum">(3)</b>
console.log(parseFloat('14.10-patch.2')); <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>3</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>3.141592653589793</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>14</code>&#160;‚Äì √ßa ne change rien pour <code>parseInt</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>14.1</code>&#160;‚Äì la fonction s&#8217;arr√™te √† la d√©cimale pr√©c√©dant une lettre.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>parseInt</code> a cette particularit√© que l&#8217;on peut choisir la base
de la conversion avec le second argument de la fonction&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/parse-int.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">console.log(parseInt(10, 16));    <b class="conum">(1)</b>
console.log(parseInt('A', 16));   <b class="conum">(2)</b>
console.log(parseInt('A00', 16)); <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>16</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>10</code>&#160;‚Äì <code>A</code>&#160;vaut&#160;<code>10</code> en hexad√©cimal.</p>
</li>
<li>
<p>Affiche&#160;<code>2560</code>&#160;‚Äì aurait pu s&#8217;√©crire <code>0xA00</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="formater_et_arrondir_des_nombres">5.4. Formater et arrondir des nombres</h3>
<div class="paragraph">
<p>Si l&#8217;envie vous prenait de vouloir arrondir des nombres, il existe
quelques fonctions pour vous aider&#160;:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>Math.round</code>
</td>
<td class="hdlist2">
<p>Arrondit √† l&#8217;entier le plus proche.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Math.ceil</code>
</td>
<td class="hdlist2">
<p>Arrondit √† l&#8217;entier sup√©rieur du nombre donn√©.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Math.floor</code>
</td>
<td class="hdlist2">
<p>Arrondit √† l&#8217;entier inf√©rieur du nombre donn√©.</p>
</td>
</tr>
</table>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/round.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">console.log(Math.round(3.1));    <b class="conum">(1)</b>
console.log(Math.round(3.8));    <b class="conum">(2)</b>
console.log(Math.round(3.5));    <b class="conum">(3)</b>

console.log(Math.ceil(3.14));    <b class="conum">(4)</b>
console.log(Math.floor(3.99));   <b class="conum">(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>3</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>4</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>4</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>4</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>3</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Enfin, on peut pr√©server le formatage du nombre de d√©cimales
apr√®s la virgule en transformant le nombre <em>en cha√Æne de caract√®res</em>
gr√¢ce √† la m√©thode <code>toFixed</code>&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/to-fixed.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">console.log(10.0101.toFixed(2));     <b class="conum">(1)</b>
console.log(10.0101.toFixed(0));     <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>'10.01'</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>'10'</code>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="functions">6. Cr√©er et r√©utiliser des blocs de code (fonctions)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Une fonction est un <strong>bloc de code r√©utilisable et param√©trable</strong>.
Elle <em>retourne</em> un r√©sultat dont la valeur se calcule en fonction des
param√®tres que nous lui passons.</p>
</div>
<div class="paragraph">
<p>Cela se passe en deux temps&#160;:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>la <em>cr√©ation</em> de la fonction&#160;;</p>
</li>
<li>
<p>l'<em>ex√©cution</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>ECMAScript fournit un ensemble de fonctions de base&#160;: <code>console.log</code>, <code>setTimeout</code>, etc.
Node ajoute les siennes (comme <code>require</code>).
Nous avons la libert√© d&#8217;en cr√©er nous-m√™mes, sp√©cifiques √† nos besoins.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">functions/base.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const hello = (mot) =&gt; `Hello ${mot}`;  <b class="conum">(1)</b>

console.log(hello);                     <b class="conum">(2)</b>
console.log(hello('World'));            <b class="conum">(3)</b>
console.log(hello('toi'));

const random = () =&gt; {
  const limit = 100;

  return Math.floor(Math.random() * limit);
};

console.log(random());                  <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>On <em>cr√©e</em> la fonction <code>hello</code>.</p>
</li>
<li>
<p>Affiche <code>[Function: hello]</code>&#160;‚Äì il s&#8217;agit de la d√©finition de la fonction.</p>
</li>
<li>
<p>Affiche <code>"Hello World"</code>&#160;‚Äì il s&#8217;agit de l'<em>ex√©cution</em> de la fonction, qui <em>retourne</em> un r√©sultat.</p>
</li>
<li>
<p>Affiche un nombre al√©atoire entre&#160;0 et&#160;100&#160;‚Äì cette fonction est invoqu√©e sans param√®tre.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>L&#8217;exemple pr√©c√©dent nous indique qu&#8217;une fonction se d√©coupe en trois parties&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Les <strong>arguments</strong></dt>
<dd>
<p>C&#8217;est la partie √† gauche de la fl√®che&#160;(<code>&#8658;</code>).
Les arguments sont s√©par√©s par des virgules.</p>
</dd>
<dt class="hdlist1">Le <strong>corps</strong></dt>
<dd>
<p>C&#8217;est la partie entre accolades.
Quand la fonction est sur une ligne,
le r√©sultat de l&#8217;op√©ration est <em>implicitement retourn√©</em>.
On peut dans ce cas se passer du mot-cl√© <code>return</code>.</p>
</dd>
<dt class="hdlist1">La <strong>valeur de retour</strong></dt>
<dd>
<p>C&#8217;est la valeur renvoy√©e en dehors de la fonction.
Elle est d√©finie √† l&#8217;aide du mot-cl√© <code>return</code>.
La valeur <code>undefined</code> est retourn√©e de mani√®re implicite
lorsque ce dernier est absent.</p>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">üí°</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Rappel</span> Variables et port√©e</div>
<div class="paragraph">
<p>Le corps d&#8217;une fonction constitue une <em>port√©e</em>&#160;: toute variable d√©finie
dans le corps d&#8217;une fonction est invisible en dehors.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="anonymous-function">6.1. Les fonctions anonymes</h3>
<div class="paragraph">
<p>Les fonctions anonymes sont employ√©es en arguments d&#8217;autres fonctions.
On les dit <em>anonymes</em>, car elles ne sont pas consign√©es dans des <em>variables</em>.
Il est fr√©quent de les utiliser pour <em>it√©rer</em> sur des tableaux,
lors d&#8217;√©v√©nements ou dans des <a href="#promise">promesses</a>.</p>
</div>
<div class="paragraph">
<p>C&#8217;est une mani√®re √©l√©gante d&#8217;encapsuler du code √† ex√©cuter plus tard.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">functions/anonymous.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">setTimeout(() =&gt; console.log('Une seconde plus tard'), 1000);

setTimeout(() =&gt; {
  console.log('Deux secondes plus tard');     <b class="conum">(1)</b>
}, 2000);

process.on('exit', () =&gt; {
  console.log('Le processus se termine');     <b class="conum">(2)</b>
});</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"Deux secondes plus tard"</code> deux secondes apr√®s le d√©but du script.</p>
</li>
<li>
<p>Affiche <code>"Le processus se termine"</code> quand le processus se termine, une fois que toutes les actions en attente ont √©t√© ex√©cut√©es.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="callback">6.2. Les fonctions de rappel (callback)</h3>
<div class="paragraph">
<p>Quand une fonction est pass√©e en argument d&#8217;une autre fonction,
on appelle cela un <em>callback</em>.
On l&#8217;appelle plus tard (<em>to&#160;call back</em>) que le moment o√π elle est d√©finie.
Elle re√ßoit des param√®tres qui aident √† reconstruire un contexte
<em>au moment</em> de son ex√©cution.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">functions/callback.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const printYear = (date) =&gt; {             <b class="conum">(2)</b>
  console.log(date.getUTCFullYear());     <b class="conum">(3)</b>
}

setTimeout(printYear, 1000, new Date());  <b class="conum">(1)</b>
// √©quivalent √†
// setTimeout(date =&gt; printYear(date), 1000, new Date());</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Le troisi√®me argument (et les suivants) de <code>setTimeout</code> sont transmis en param√®tres de la fonction de rappel (<em>callback</em>).</p>
</li>
<li>
<p>Cette fonction est invoqu√©e une seconde apr√®s le d√©but du script, et re√ßoit en param√®tre la date du moment.</p>
</li>
<li>
<p>Affiche l&#8217;ann√©e de la date pass√©e en argument&#160;‚Äì dans cet exemple, l&#8217;ann√©e en courss.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="rest-parameters">6.3. Param√®tres du reste (rest parameters)</h3>
<div class="paragraph">
<p>Les <em>param√®tres du reste</em> sont un nombre ind√©fini de param√®tres
regroup√©s dans un m√™me <a href="#array">tableau</a>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">functions/rest.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const combien_de = (nom, ...params) =&gt; {
  console.log(`On a compt√© ${params.length} ${nom}.`);
};

combien_de('patates', 'un', 'deux', 'trois'); <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"On a compt√© 3 patates."</code>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="array">7. Lister, filtrer et trier des √©l√©ments (Array)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les tableaux (ou listes index√©es) servent √† lister des √©l√©ments,
de tout type et dans l&#8217;ordre de notre choix.
Chaque √©l√©ment de tableau se voit attribuer un num√©ro (<em>index</em>)
qui sert √† le retrouver, en it√©rant √† l&#8217;aide de boucles
ou en ayant recours √† d&#8217;autres m√©thodes d&#8217;identification.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/base.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const weekdays = [
  'lundi', 'mardi', 'mercredi', 'jeudi', 'vendredi'
];

console.log(weekdays);          <b class="conum">(1)</b>
console.log(weekdays.length);   <b class="conum">(2)</b>
console.log(weekdays[1]);       <b class="conum">(3)</b>
console.log(weekdays[0]);
console.log(weekdays[5]);       <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["lundi", "mardi", "mercredi", "jeudi", "vendredi"]</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>5</code>&#160;‚Äì soit la longueur du tableau.</p>
</li>
<li>
<p>Affiche <code>"mardi"</code>&#160;‚Äì un tableau commence √† l&#8217;index&#160;<code>0</code>.</p>
</li>
<li>
<p>Affiche <code>undefined</code>&#160;‚Äì il n&#8217;y a aucun √©l√©ment d√©fini √† l&#8217;index&#160;<code>5</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>L&#8217;exemple pr√©c√©dent illustre plusieurs caract√©ristiques des collections&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>La num√©rotation d√©bute √† l&#8217;index <code>0</code>.</p>
</li>
<li>
<p>La propri√©t√© <code>length</code> contient la longueur du tableau.</p>
</li>
<li>
<p>La valeur <code>undefined</code> est retourn√©e quand on tente d&#8217;acc√©der √† un index
qui n&#8217;existe pas.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="cr√©er_des_tableaux_√†_partir_dautres_valeurs">7.1. Cr√©er des tableaux √† partir d&#8217;autres valeurs</h3>
<div class="paragraph">
<p>La fonction <code>Array.from</code> est une mani√®re de cr√©er
un tableau √† partir de quelque chose qui <em>ressemble √† un tableau</em>.</p>
</div>
<div id="array.from" class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/from.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">console.log(Array.from('fromage'));            <b class="conum">(1)</b>

// utilisation du second argument
const uppercase = (letter) =&gt; letter.toUpperCase();
console.log(Array.from('fromage', uppercase)); <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["f", "r", "o", "m", "a", "g", "e"]</code>&#160;‚Äì chaque lettre de la cha√Æne.</p>
</li>
<li>
<p>Affiche <code>["F", "R", "O", "M", "A", "G", "E"]</code>&#160;‚Äì chaque lettre de la cha√Æne a √©t√© pass√©e en majuscule.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le deuxi√®me argument de <code>Array.from</code> est facultatif.
C&#8217;est une <a href="#anonymous-function">fonction anonyme</a> qui s&#8217;utilise comme les <a href="#array.forEach">m√©thodes d&#8217;it√©ration</a> <code>Array.forEach</code> et <code>Array.map</code>.</p>
</div>
<div class="paragraph">
<p>Cette m√©thode est des plus utiles pour it√©rer sur des listes d&#8217;√©l√©ments DOM
obtenues avec les fonctions <code>document.querySelectorAll</code>
et <code>document.getElementsByTagName</code>, entre autres.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const links = document.querySelectorAll('a');

console.log(Array.from(links).map(a =&gt; a.textContent));
// parce qu'on ne peut pas faire
// links.map(a =&gt; a.textContent);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="array.concat">7.2. Combiner des tableaux</h3>
<div class="paragraph">
<p>Il est relativement ais√© de composer des tableaux en fonction d&#8217;autres tableaux.
Une premi√®re mani√®re d&#8217;y parvenir est d&#8217;utiliser la m√©thode <code>concat</code>&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/concat.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const mousquetaires = ['Athos', 'Porthos', 'Aramis'];
const extras = ['d\'Artagnan', 'Albert'];

console.log(mousquetaires.concat(extras));      <b class="conum">(1)</b>

// autre mani√®re d'obtenir la liste des 5 mousquetaires
console.log([].concat(mousquetaires, extras));</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["Athos", "Porthos", "Aramis", "d&#8217;Artagnan", "Albert"]</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Cette m√©thode <em>cr√©e un nouveau tableau</em> √† partir de deux pass√©s en param√®tres.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">üí¨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Alternative</span> Op√©rateur&#160;<code>&#8230;&#8203;</code>&#160;(<em>spread</em>)</div>
<div class="paragraph">
<p>Une autre mani√®re de faire est d&#8217;utiliser l&#8217;op√©rateur <code>&#8230;&#8203;</code>
(aussi appel√© <a href="#spread">spread</a>) pour √©clater plusieurs tableaux et
les rassembler dans un autre&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/spread.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const mousquetaires = ['Athos', 'Porthos', 'Aramis'];
const extras = ['d\'Artagnan', 'Albert'];

console.log([...mousquetaires, ...extras]);   <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["Athos", "Porthos", "Aramis", "d&#8217;Artagnan", "Albert"]</code>.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>√Ä l&#8217;inverse, la m√©thode <code>join</code> <em>concat√®ne</em> tous les √©l√©ments dans une
<a href="#string">cha√Æne de caract√®res</a> avec le s√©parateur de notre choix (optionnel).</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/join.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const headers = ['ID', 'NOM', 'PRENOM'];

console.log(headers.join());    <b class="conum">(1)</b>
console.log(headers.join(';')); <b class="conum">(2)</b>
console.log(headers.join(''));  <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"ID,NOM,PRENOM"</code>&#160;‚Äì le s√©parateur par d√©faut est une virgule.</p>
</li>
<li>
<p>Affiche <code>"ID;NOM;PRENOM"</code>&#160;‚Äì on a choisi le point-virgule comme s√©parateur.</p>
</li>
<li>
<p>Affiche <code>"IDNOMPRENOM"</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="array.forEach">7.3. It√©rer sur les valeurs avec des boucles</h3>
<div class="paragraph">
<p>Les boucles sont une mani√®re de parcourir plusieurs valeurs.
Elles aident √† mettre en place des automatismes pour √©viter de r√©p√©ter du code.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/loop.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const weekdays = [
  'lundi', 'mardi', 'mercredi', 'jeudi', 'vendredi'
];

for (const day of weekdays) {
  console.log(day);                           <b class="conum">(1)</b>
}

// on obtient le m√™me r√©sultat avec la m√©thode `forEach`
weekdays.forEach((day) =&gt; console.log(day));</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche successivement chaque valeur du tableau&#160;‚Äì <code>"lundi"</code>, <code>"mardi"</code>, <code>"mercredi"</code>, <code>"jeudi"</code>, <code>"vendredi"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Prenons le temps de revenir sur cet exemple.
On y d√©couvre plusieurs mani√®res d&#8217;√©crire des boucles sur un tableau&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>for&#8230;&#8203;of</code></dt>
<dd>
<p>On affecte une variable avec chaque √©l√©ment (op√©rateur <code>of</code>) du tableau.
Les expressions situ√©es entre accolade sont ex√©cut√©es pour
chaque √©l√©ment du tableau.</p>
</dd>
<dt class="hdlist1"><code>forEach(element &#8658; expression)</code></dt>
<dd>
<p>La m√©thode <code>forEach</code> applique une <a href="#anonymous-function">fonction anonyme</a>
pour chaque √©l√©ment du tableau.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Il y a en r√©alit√© deux mani√®res d&#8217;it√©rer avec la boucle&#160;<code>for</code>&#160;:
sur les <em>index</em> (avec l&#8217;op√©rateur&#160;<code>in</code>)
et sur les <em>valeurs</em> (avec l&#8217;op√©rateur&#160;<code>of</code>).</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/for-of-in.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const weekend = ['samedi', 'dimanche'];

for (const index in weekend) {
  console.log(index);             <b class="conum">(1)</b>
  console.log(weekend[index]);    <b class="conum">(2)</b>
}

for (const day of weekend) {
  console.log(day);               <b class="conum">(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche successivement&#160;<code>0</code> puis&#160;<code>1</code>.</p>
</li>
<li>
<p>Affiche successivement <code>"samedi"</code> puis <code>"dimanche"</code>&#160;‚Äì l&#8217;index sert √† retrouver la valeur dans le tableau.</p>
</li>
<li>
<p>Affiche successivement <code>"samedi"</code> puis <code>"dimanche"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La m√©thode <code>forEach</code> propage en r√©alit√© trois arguments √† notre fonction anonyme&#160;:
l&#8217;√©l√©ment en cours de l&#8217;it√©ration, l&#8217;index de l&#8217;√©l√©ment et le tableau d&#8217;origine.</p>
</div>
<div class="paragraph">
<p>Pourquoi passer le tableau d&#8217;origine alors qu&#8217;on it√®re dessus&#160;?
Pour donner du contexte au cas o√π on op√®re
avec une <a href="#function">fonction nomm√©e</a>.
Nous verrons un usage concret de ce troisi√®me argument
dans la section "<a href="#array.map">transformer les valeurs</a>".</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/foreach-function.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const undeux = ['un', 'deux'];

const printIndex = (element, index, array) =&gt; {
  console.log(`${element} : index ${index}`);  <b class="conum">(2)</b>
}

undeux.forEach(printIndex);                    <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Applique la fonction <code>printIndex</code> pour chaque √©l√©ment du tableau <code>undeux</code>.</p>
</li>
<li>
<p>Affiche successivement <code>"un&#160;: index 0"</code> puis <code>"deux&#160;: index 1"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Outre l&#8217;inspection et l&#8217;affichage des valeurs, les boucles offrent la libert√©
de <a href="#array.sort">trier</a>, de <a href="#array.map">transformer les valeurs</a>,
de <a href="#array.filter">filtrer selon des conditions</a>,
mais aussi de <a href="#array.reduce">cr√©er de nouvelles structures de donn√©es</a>.</p>
</div>
<div class="paragraph">
<p>Ces m√©thodes sont d√©crites dans les sections suivantes.</p>
</div>
</div>
<div class="sect2">
<h3 id="array.sort">7.4. Trier les valeurs</h3>
<div class="paragraph">
<p>La m√©thode <code>sort</code> change l&#8217;ordre des √©l√©ments d&#8217;un tableau.
Elle utilise une <a href="#anonymous-function">fonction anonyme</a> qui compare deux √©l√©ments
entre eux&#160;; elle retourne un nombre positif, n√©gatif ou √©gal √† z√©ro selon la
logique que l&#8217;on souhaite donner au tri&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Quand la comparaison est <em>n√©gative</em>,
<code>sort</code> place le premier √©l√©ment <em>avant</em> le second.</p>
</li>
<li>
<p>Quand la comparaison est <em>positive</em>,
<code>sort</code> place le premier √©l√©ment <em>apr√®s</em> le second.</p>
</li>
<li>
<p>Quand la comparaison est √©gale √† z√©ro, nulle ou non sp√©cifi√©e,
l&#8217;ordre des √©l√©ments reste inchang√©.</p>
</li>
</ul>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/sort.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const sortAsc = (a, b) =&gt; a - b;
const sortDesc = (a, b) =&gt; b - a;

console.log([1, 3, 2].sort(sortAsc));                 <b class="conum">(1)</b>

const undeux = [
  {label: 'deux', order: 2},
  {label: 'un', order: 1}
];

console.log(undeux.sort((a, b) =&gt; a.order - b.order));<b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>[1, 2, 3]</code>.</p>
</li>
<li>
<p>Affiche <code>[ { label: "un", order: 1 }, { label: "deux", order: 2 } ]</code>&#160;‚Äì le tableau a √©t√© tri√© sur la valeur de <code>order</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Les <a href="#string">cha√Ænes de caract√®res</a> peuvent √™tre compar√©es avec <code>localeCompare</code>.
Cette m√©thode retourne un nombre apr√®s une comparaison caract√®re par caract√®re
entre deux cha√Ænes.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/sort-strings.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const sortAlpha = (a, b) =&gt; a.localeCompare(b);
console.log(['A', 'b', 'c', 'a'].sort(sortAlpha));<b class="conum">(1)</b>

const undeux = [
  {label: 'un', order: 1},
  {label: 'deux', order: 2}
];

const sortLabel = (a, b) =&gt; a.label.localeCompare(b.label);
console.log(undeux.sort(sortLabel));              <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["a", "A", "b", "c"]</code>&#160;‚Äì les majuscules influencent le&#160;tri.</p>
</li>
<li>
<p>Affiche <code>[ { label: "deux", order: 2 }, { label: "un", order: 1 } ]</code>&#160;‚Äì le tableau a √©t√© tri√© sur la valeur de <code>label</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">üí°</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Alternative</span> <code>Array.reverse</code></div>
<div class="paragraph">
<p>La m√©thode <code>reverse</code> transforme le tableau d&#8217;origine
en inversant l&#8217;ordre de ses √©l√©ments.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/reverse.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const weekend = ['samedi', 'dimanche'];

weekend.reverse();

console.log(weekend);     <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["dimanche", "samedi"]</code>.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="array.map">7.5. Transformer les valeurs</h3>
<div class="paragraph">
<p>La m√©thode <code>map</code> fonctionne quasiment comme <code>forEach</code>, √† ceci pr√®s qu&#8217;elle
retourne un nouveau tableau, constitu√© des valeurs retourn√©es par la fonction
appliqu√©e sur chaque √©l√©ment.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/map.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const newArray = ['a', ' b', 'c '].map(value =&gt; {
  return value.trim().toUpperCase();
});

console.log(newArray); <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Retourne <code>['A', 'B', 'C']</code>&#160;‚Äì on a pass√© tous les √©l√©ments en lettres majuscules.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le troisi√®me argument de la m√©thode <code>map</code> prend ici tout son sens.
Par exemple, si l&#8217;on souhaite d√©doublonner un tableau&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/map-dedupe.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const soundcheck = ['un', 'deux', 'un', 'deux'];

const dedupe = (element, index, array) =&gt; {
  if (array.slice(index+1).includes(element)) {
    return null;
  }

  return element;
}

console.log(soundcheck.map(dedupe));          <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>[null, null, "un", "deux"]</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Cet exemple v√©rifie, √† chaque it√©ration, si la valeur de l&#8217;√©l√©ment
est contenue dans la <em>suite du tableau</em>.
<code>array.slice(index+1)</code> cr√©e un nouveau tableau contenant tous les √©l√©ments
situ√©s <em>apr√®s</em> l&#8217;√©l√©ment courant (<code>index+1</code>).</p>
</div>
<div class="paragraph">
<p>La m√©thode de transformation <code>reduce</code> est diff√©rente, car elle passe le r√©sultat
de la pr√©c√©dente it√©ration √† la suivante.
C&#8217;est comme si elle <em>accumulait</em> les r√©sultats.
Elle retourne une valeur finale qui peut √™tre autre chose qu&#8217;un tableau.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/reduce.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const stats = [2, 4, 6, 10];

const sum = (previous, element) =&gt; previous + element;  <b class="conum">(2)</b>

console.log(stats.reduce(sum, 0));    <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Effectue une <em>r√©duction</em> √† l&#8217;aide de la fonction <code>sum</code> et d&#8217;une valeur par d√©faut de&#160;<code>0</code>&#160;‚Äì affiche&#160;<code>22</code> √† l&#8217;issue des it√©rations‚ÄØ.</p>
</li>
<li>
<p>La valeur de l&#8217;√©l√©ment est le <em>second param√®tre</em>&#160;; le premier param√®tre correspond au r√©sultat de l&#8217;it√©ration pr√©c√©dente ou √† la valeur initiale, pass√©e en argument √† <code>reduce</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="array.filter">7.6. Filtrer les valeurs</h3>
<div class="paragraph">
<p>La m√©thode <code>filter</code> retourne un nouveau tableau filtr√© √† l&#8217;aide
d&#8217;une <a href="#anonymous-function">fonction anonyme</a>.
Seuls les √©l√©ments qui satisfont √† la condition √©tablie par la fonction
se retrouvent dans le nouveau tableau.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/filter.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const values = [null, 'un', 'deux', 3];

const is_finite = (value) =&gt; Number.isFinite(value);
const direct = (value) =&gt; value;

console.log(values.filter(is_finite));  <b class="conum">(1)</b>
console.log(values.filter(direct));     <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Retourne&#160;``[3]`&#160;‚Äì c&#8217;est la seule valeur qui soit un nombre.</p>
</li>
<li>
<p>Retourne <code>["un", "deux", 3]</code>&#160;‚Äì ce sont les valeurs non&#160;nulles.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="array.find">7.7. Identifier des valeurs</h3>
<div class="paragraph">
<p>Les m√©thodes <code>indexOf</code>, <code>lastIndexOf</code> et <code>includes</code> identifient une
<em>valeur exacte</em> au sein d&#8217;un tableau.</p>
</div>
<div class="paragraph">
<p><code>indexOf</code> et <code>lastIndexOf</code> retournent l'<em>index</em> de la valeur recherch√©e.
Si aucun √©l√©ment n&#8217;a √©t√© retrouv√©, elles retourneront la valeur&#160;<code>-1</code>.<br>
<code>includes</code> retourne un <a href="#boolean">bool√©en</a> indiquant si la recherche
est fructueuse (<code>true</code>) ou non (<code>false</code>).</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/index-of-includes.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const soundcheck = ['un', 'deux', 'un', 'deux'];

console.log(soundcheck.indexOf('un'));        <b class="conum">(1)</b>
console.log(soundcheck.indexOf('deux'));      <b class="conum">(2)</b>
console.log(soundcheck.indexOf('trois'));     <b class="conum">(3)</b>

console.log(soundcheck.lastIndexOf('deux'));  <b class="conum">(4)</b>

console.log(soundcheck.includes('deux'));     <b class="conum">(5)</b>
console.log(soundcheck.includes('trois'));    <b class="conum">(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>0</code>&#160;‚Äì le premier <code>"un"</code> est l&#8217;√©l√©ment&#160;``0` du tableau.</p>
</li>
<li>
<p>Affiche&#160;<code>1</code>&#160;‚Äì le premier <code>"deux"</code> est l&#8217;√©l√©ment&#160;``1` du tableau.</p>
</li>
<li>
<p>Affiche&#160;<code>-1</code>&#160;‚Äì cet √©l√©ment est absent du tableau.</p>
</li>
<li>
<p>Affiche&#160;<code>3</code>&#160;‚Äì le dernier <code>"deux"</code> est l&#8217;√©l√©ment&#160;``3` du tableau.</p>
</li>
<li>
<p>Affiche&#160;<code>true</code>&#160;‚Äì l&#8217;√©l√©ment <code>"un"</code> existe dans le tableau.</p>
</li>
<li>
<p>Affiche&#160;<code>false</code>&#160;‚Äì l&#8217;√©l√©ment <code>"trois"</code> n&#8217;existe pas dans le tableau.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Il existe ensuite d&#8217;autres m√©thodes comme <code>find</code>, <code>some</code> et <code>every</code>.
Elles <strong>identifient des √©l√©ments √† partir d&#8217;une fonction</strong>.
Les conditions de recherche sont plus compl√®tes, car on n&#8217;est pas oblig√©
de conna√Ætre la valeur exacte recherch√©e.</p>
</div>
<div class="paragraph">
<p>La m√©thode <code>find</code> retourne le premier <em>√©l√©ment</em> qui remplisse la condition&#160;;
 <code>findIndex</code> en retourne l'<em>index</em>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/find.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const values = [null, 2, 10, 100];

const biggerThan50 = (value) =&gt; value &gt; 50;   <b class="conum">(1)</b>

console.log(values.find(biggerThan50));       <b class="conum">(2)</b>
console.log(values.findIndex(biggerThan50));  <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La fonction retourne <code>true</code> si la valeur pass√©e en argument est un nombre sup√©rieur&#160;√†&#160;<code>50</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>100</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>3</code>&#160;‚Äì c&#8217;est l&#8217;index de la valeur&#160;<code>100</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Les m√©thodes <code>some</code> et <code>every</code> retournent <code>true</code> respectivement
si <em>au moins une it√©ration</em> est satisfaisante et
si <em>toutes les it√©rations</em> sont satisfaisantes.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/some.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const values = [1, 'a', 120, undefined, 4];
const isUndefined = (value) =&gt; value === undefined;

console.log(values.every(isUndefined));                <b class="conum">(1)</b>
console.log(values.some(isUndefined));                 <b class="conum">(2)</b>
console.log(values.filter(d =&gt; d).some(isUndefined));  <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>false</code>&#160;‚Äì toutes les valeurs ne sont pas √©gales √† <code>undefined</code>.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì au moins une valeur est √©gale √† <code>undefined</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;‚Äì il n&#8217;y a plus de valeur <code>undefined</code> dans le tableau, car on a utilis√© la m√©thode <a href="#array.filter">filter</a> pour supprimer les valeurs vides.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="array-destructuring">7.8. D√©composition de tableau (<em>destructuring</em>)</h3>
<div class="paragraph">
<p>L&#8217;affectation par <em>d√©composition</em> (<em>destructuring</em>) est une mani√®re √©l√©gante
de piocher des valeurs dans un <a href="#array">tableau</a>.
Ce m√©canisme n&#8217;alt√®re pas le contenu des variables d√©compos√©es et existe aussi
pour les <a href="#object-destructuring">objets</a>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/destructuring.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const weekdays = [
  'lundi', 'mardi', 'mercredi', 'jeudi', 'vendredi'
];

const [first, second] = weekdays;
console.log(first);               <b class="conum">(1)</b>
console.log(second);              <b class="conum">(2)</b>

const [,, third] = weekdays;
console.log(third);               <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"lundi"</code>.</p>
</li>
<li>
<p>Affiche <code>"mardi"</code>.</p>
</li>
<li>
<p>Affiche <code>"mercredi"</code>&#160;‚Äì l&#8217;utilisation des virgules sans variable a permis de <em>sauter</em> des positions dans la d√©composition.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La d√©composition se combine agr√©ablement avec l&#8217;op√©rateur <code>&#8230;&#8203;</code> (<em>spread</em>).
Il accumule <em>le reste</em> des √©l√©ments dans une variable, sous forme de tableau.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/destructuring-rest.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const weekdays = [
  'lundi', 'mardi', 'mercredi', 'jeudi', 'vendredi'
];

const [first, second, ...rest] = weekdays;
console.log(rest);                  <b class="conum">(1)</b>

// revient au m√™me que
// const [,, ...rest] = weekdays;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["mercredi", "jeudi", "vendredi"]</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La m√©thode <code>slice</code> offre davantage de souplesse pour g√©rer les <em>limites</em>.
On choisit <em>l&#8217;index de d√©but</em> (inclus) et celui <em>de fin</em> (non inclus) de la d√©composition.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/slice.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const values = ['un', 'deux', 'trois', 'quatre'];

console.log(values.slice(1));     <b class="conum">(1)</b>
console.log(values.slice(1, 2));  <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["deux", "trois", "quatre"]</code>&#160;‚Äì √† partir de l&#8217;index&#160;<code>1</code>.</p>
</li>
<li>
<p>Affiche <code>["deux"]</code>&#160;‚Äì √† partir de l&#8217;index&#160;<code>1</code> et jusqu&#8217;√† l&#8217;index&#160;<code>2</code> (non&#160;inclus).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Si les valeurs de d√©but et/ou de fin sont <em>n√©gatives</em>,
les index sont calcul√©s <em>√† partir de la fin</em> du tableau.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/slice-negative.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const values = ['un', 'deux', 'trois', 'quatre'];

console.log(values.slice(-1));     <b class="conum">(1)</b>
console.log(values.slice(-3));     <b class="conum">(2)</b>

console.log(values.slice(0, -1));  <b class="conum">(3)</b>
console.log(values.slice(0, -3));  <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["quatre"]</code>&#160;‚Äì premier √©l√©ment √† partir de la&#160;fin.</p>
</li>
<li>
<p>Affiche <code>["deux", "trois", "quatre"]</code>&#160;‚Äì les trois premiers √©l√©ments √† partir de la&#160;fin.</p>
</li>
<li>
<p>Affiche <code>["un", "deux", "trois"]</code>&#160;‚Äì jusqu&#8217;au dernier √©l√©ment √† partir de la fin (non&#160;inclus).</p>
</li>
<li>
<p>Affiche <code>["un"]</code>&#160;‚Äì jusqu&#8217;au troisi√®me √©l√©ment √† partir de la fin (non&#160;inclus).</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="object">8. Repr√©senter des structures d&#8217;objet et y acc√©der</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les structures d&#8217;objet servent √† lister des √©l√©ments de tout type
au sein d&#8217;une m√™me variable.
L&#8217;indexation se fait <em>comme dans un dictionnaire</em>,
avec un identifiant unique pour chaque valeur.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/base.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const francine = {
  first_name: 'Francine',
  location: 'Dr√¥me',
};

console.log(francine.first_name); <b class="conum">(1)</b>

francine.age = 25;                <b class="conum">(2)</b>
console.log(francine.age);        <b class="conum">(3)</b>
console.log(francine.twitter);    <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"Francine"</code>.</p>
</li>
<li>
<p>On affecte une valeur num√©rique √† l&#8217;index <code>age</code> une fois l&#8217;objet&#160;cr√©√©.</p>
</li>
<li>
<p>Affiche&#160;``25`&#160;‚Äì la valeur num√©rique pr√©c√©demment affect√©e.</p>
</li>
<li>
<p>Affiche&#160;``undefined`&#160;‚Äì aucune valeur n&#8217;est affect√©e pour cette&#160;cl√©.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Une autre syntaxe existe pour <em>cr√©er</em> des valeurs et y <em>acc√©der</em> en utilisant
des variables en guise d&#8217;identifiant d&#8217;index&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/dynamic.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const SOCIAL_NETWORK = 'twitter';

const francine = {
  first_name: 'Francine',
  location: 'Dr√¥me',
  [SOCIAL_NETWORK]: '@FrancineDu26',    <b class="conum">(1)</b>
};

console.log(francine[SOCIAL_NETWORK]);  <b class="conum">(2)</b>

// mani√®res √©quivalentes, sans utilisation de variable
console.log(francine.twitter);
console.log(francine['twitter']);</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affecte la cha√Æne <code>@FrancineDu26</code> dans l&#8217;index correspondant √† la valeur de la variable <code>SOCIAL_NETWORK</code>.</p>
</li>
<li>
<p>Affiche <code>"@FrancineDu26"</code>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="object-destructuring">8.1. D√©composition d&#8217;objet (<em>destructuring</em>)</h3>
<div class="paragraph">
<p>L&#8217;affectation par d√©composition (<em>destructuring</em>) est une mani√®re
√©l√©gante de piocher des valeurs dans un <a href="#object">objet</a>.
Ce m√©canisme existe aussi pour les <a href="#array-destructuring">tableaux</a>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/destructuring.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const francine = {
  first_name: 'Francine',
  location: 'Dr√¥me',
  twitter: '@FrancineDu26',
};

const {location,twitter} = francine;
console.log(location);            <b class="conum">(1)</b>

const {first_name:prenom} = francine;
console.log(prenom);              <b class="conum">(2)</b>

const {is_admin=false} = francine;
console.log(is_admin);            <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"Dr√¥me"</code>&#160;‚Äì on a d√©compos√© la cl√© <code>location</code>.</p>
</li>
<li>
<p>Affiche <code>"Francine"</code>&#160;‚Äì on a d√©compos√© puis renomm√© la cl√© <code>first_name</code> en une nouvelle variable&#160;: <code>prenom</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;‚Äì on a d√©compos√© la cl√© <code>is_admin</code> et, comme elle n&#8217;existe pas, on a sp√©cifi√© la valeur par d√©faut <code>false</code>, au lieu de <code>undefined</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La d√©composition se combine agr√©ablement avec l&#8217;op√©rateur <code>&#8230;&#8203;</code> (<em>spread</em>).
Il accumule <em>le reste</em> des √©l√©ments dans une variable, sous forme d&#8217;objet.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/destructuring-rest.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const francine = {
  first_name: 'Francine',
  location: 'Dr√¥me',
  twitter: '@FrancineDu26',
};

const {first_name, ...metadata} = francine;

console.log(first_name);          <b class="conum">(1)</b>
console.log(metadata);            <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"Francine"</code>.</p>
</li>
<li>
<p>Affiche <code>{ location: "Dr√¥me", twitter: "@FrancineDu26" }</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="object.assign">8.2. Combiner des objets</h3>
<div class="paragraph">
<p><code>Object.assign</code> est une m√©thode qui sert √† √©tendre et combiner plusieurs objets.
On a le choix d&#8217;int√©grer les nouveaux √©l√©ments √† un objet existant
ou bien d&#8217;en cr√©er un nouveau.
Les objets sont combin√©s dans le premier param√®tre de la fonction.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/assign.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const o = {
  first_name: 'Francine',
};

const o2 = Object.assign({}, o, {location: 'Dr√¥me'});
console.log(o2);        <b class="conum">(1)</b>
console.log(o);         <b class="conum">(2)</b>

Object.assign(o2, {location: 'Paris'}, {location: 'Ard√®che'});
console.log(o2);        <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>{ first_name: "Francine", location: "Dr√¥me" }</code>&#160;‚Äì la nouvelle variable contient nos deux objets combin√©s.</p>
</li>
<li>
<p>Affiche <code>{ first_name: "Francine" }</code>&#160;‚Äì ce sont les valeurs originelles de notre objet.</p>
</li>
<li>
<p>Affiche <code>{ first_name: "Francine", location: 'Ard√®che' }</code>&#160;‚Äì l&#8217;objet&#160;<code>o2</code> a re√ßu la nouvelle propri√©t√© <code>location</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Notez que les affectations se font de <em>gauche √† droite</em>.
Toute cl√© existante est remplac√©e.</p>
</div>
<div class="paragraph">
<p>La <a href="#object-destructuring">d√©composition d&#8217;objet</a> sert √©galement √† combiner
des objets entre&#160;eux.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/destructuring-spread.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const francine = {
  first_name: 'Francine',
};

const francine26 = {...francine, location: 'Dr√¥me'};
console.log(francine26);      <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>{ first_name: "Francine", location: "Dr√¥me" }</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="it√©rer_sur_des_objets">8.3. It√©rer sur des objets</h3>
<div class="paragraph">
<p>La m√©thode <code>Object.entries</code> est probablement la plus adapt√©e pour it√©rer √† la
fois sur les <em>cl√©s</em> et sur les <em>valeurs</em> d&#8217;un objet.
Elle retourne un tableau qui contient autant de paires de <code>[cl√©, valeur]</code> qu&#8217;il y a
d&#8217;√©l√©ments dans l&#8217;objet.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/entries.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const francine = {
  first_name: 'Francine',
  location: 'Dr√¥me',
};

console.log(Object.entries(francine)); <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>[[ "first_name", "Francine" ], [ "location", "Dr√¥me" ]]</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Nous sommes libres d'<a href="#array.forEach">it√©rer sur les valeurs</a>
et d&#8217;utiliser la <a href="#array-destructuring">d√©composition de tableaux</a>
pour rendre notre code explicite&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/entries-loop.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const francine = {
  first_name: 'Francine',
  location: 'Dr√¥me',
};

Object.entries(francine).forEach(([key, value]) =&gt; {
  console.log(`francine.${key} vaut ${value}`);   <b class="conum">(1)</b>
})

// m√™me r√©sultat, autre m√©thode
for (const [key, value] of Object.entries(francine)) {
  console.log(`francine.${key} vaut ${value}`);
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche successivement <code>"francine.first_name vaut Francine"</code> puis <code>"francine.location vaut Dr√¥me"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Deux autres m√©thodes r√©cup√®rent soit <em>la liste des cl√©s</em> d&#8217;un objet (<code>Object.keys</code>)
soit <em>la liste de ses valeurs</em> (<code>Object.values</code>).
Dans les deux cas, les r√©sultats sont retourn√©s sous forme d&#8217;un <a href="#array">tableau</a>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/keys.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const francine = {
  first_name: 'Francine',
  location: 'Dr√¥me',
};

console.log(Object.keys(francine));     <b class="conum">(1)</b>
console.log(Object.values(francine));   <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["first_name", "location"]</code>.</p>
</li>
<li>
<p>Affiche <code>["Francine", "Dr√¥me"]</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="identifier_des_valeurs">8.4. Identifier des valeurs</h3>
<div class="paragraph">
<p>Il y a trois mani√®res d&#8217;identifier si un objet contient une valeur
associ√©e √† une&#160;cl√©.</p>
</div>
<div class="paragraph">
<p>Le plus simple est d&#8217;utiliser la m√©thode <code>hasOwnProperty</code>.
Elle prend en argument le nom de la cl√© √† tester et
retourne un <a href="#boolean">bool√©en</a>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/has-own-property.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const francine = {
  first_name: 'Francine',
  location: 'Dr√¥me',
};

console.log(francine.hasOwnProperty('location'));   <b class="conum">(1)</b>
console.log(francine.hasOwnProperty('twitter'));    <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>true</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;‚Äì cette cl√© n&#8217;existe pas dans cet objet.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La seconde mani√®re est d&#8217;utiliser l&#8217;op√©rateur&#160;<code>in</code>.
On l&#8217;aura d√©j√† rencontr√© lors des <a href="#array.forEach">boucles</a>&#160;;
ici, on l&#8217;utilise une seule&#160;fois.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/key-in.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const francine = {
  first_name: 'Francine',
  location: 'Dr√¥me',
};

console.log('location' in francine);   <b class="conum">(1)</b>
console.log('twitter' in francine);    <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>true</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;‚Äì cette cl√© n&#8217;existe pas dans cet objet.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Enfin, on peut tester la valeur associ√©e avec la syntaxe standard <code>objet.cl√©</code>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/key.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const francine = {
  first_name: 'Francine',
  location: 'Dr√¥me',
};

console.log(Boolean(francine.location));   <b class="conum">(1)</b>
console.log(Boolean(francine.twitter));    <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>true</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Attention toutefois&#160;: cette m√©thode <em>teste uniquement la valeur</em>.
Si la cl√© existe et contient <code>undefined</code>, vous ne verrez pas la diff√©rence.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/key-undefined.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const francine = {
  first_name: 'Francine',
  location: 'Dr√¥me',
  twitter: undefined
};

console.log(Boolean(francine.twitter));          <b class="conum">(1)</b>
console.log(francine.twitter !== undefined);     <b class="conum">(2)</b>

console.log(francine.hasOwnProperty('twitter')); <b class="conum">(3)</b>
console.log('twitter' in francine);              <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>false</code>&#160;‚Äì la valeur <code>undefined</code> est convertie en <code>false</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;‚Äì la cl√© existe bien, mais elle contient la valeur <code>undefined</code>.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì le test se fait sur l&#8217;existence de la&#160;cl√©.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì idem.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="json">9. Lire et √©crire des donn√©es au format JSON</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JSON (<span class="URL"><a href="http://json.org" class="bare">json.org</a></span>) est un format de donn√©es textuel standardis√©.
Son but est de repr√©senter des donn√©es informatiques de mani√®re
interop√©rable entre diff√©rents langages.</p>
</div>
<div class="listingblock">
<div class="title">json/base.json</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
  "title": "Node.js",
  "price_tag": 32,
  "keywords": [
    "JavaScript",
    "Node.js",
    "Apprendre par l'exemple"
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le format JSON ressemble beaucoup √† une structure d'<a href="#object">objet</a> ECMAScript.
La repr√©sentation est plus stricte car <em>toute donn√©e</em> doit √™tre repr√©sent√©e
de mani√®re textuelle.
Ainsi, toutes les cl√©s sont entour√©es de <em>guillemets doubles</em>.</p>
</div>
<div class="paragraph">
<p>Les types de donn√©es autoris√©s sont les nombres, les cha√Ænes de caract√®res,
les bool√©ens, les tableaux, les objets et la valeur <code>null</code>.
On ne peut donc pas repr√©senter de <a href="#function">fonction</a>,
d'<a href="#class">instance d&#8217;objet</a> ni m√™me la valeur <code>undefined</code>.</p>
</div>
<div class="paragraph">
<p>ECMAScript embarque le n√©cessaire pour <em>parser</em> depuis et <em>convertir</em> en JSON.
Cela se fait respectivement avec les fonctions <code>JSON.parse</code> et <code>JSON.stringify</code>.</p>
</div>
<div class="paragraph">
<p>La fonction <code>JSON.parse</code> consomme du texte.
Elle retourne une repr√©sentation ECMAScript ou lance une <a href="#error">erreur</a>
en cas de probl√®me.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">json/parse.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const json_object = '{ "title": "Node.js", "price_tag": 32 }';
const json_string = '"Hello World!"';
const json_number = '32';

console.log(JSON.parse(json_string)); <b class="conum">(1)</b>
console.log(JSON.parse(json_number)); <b class="conum">(2)</b>
console.log(JSON.parse(json_object)); <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"Hello World!"</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>32</code>.</p>
</li>
<li>
<p>Affiche <code>{price_tag: 32, title: "Node.js"}</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>√Ä l&#8217;inverse, la fonction <code>JSON.stringify</code> convertit une structure ECMAScript
en cha√Æne de caract√®res au format&#160;JSON&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">json/stringify.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const location = {
  lat: 48.8503439,
  lon: 2.34658949
}

console.log(JSON.stringify(location));  <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"{\"lat\":48.8503439,\"lon\":2.34658949}"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La fonction <code>JSON.stringify</code> parcourt tous les √©l√©ments
pour les s√©rialiser en forme textuelle.
Quand elle rencontre la la cl√© sp√©ciale <code>toJSON</code>,
elle l&#8217;utilise pour effectuer la conversion&#160;:</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">json/to-json.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const location = {
  lat: 48.8503439,
  lon: 2.34658949,
  toJSON() {
    return `geo=${this.lat},${this.lon}`;
  }
}

console.log(JSON.stringify(location));    <b class="conum">(1)</b>

delete location.toJSON;
console.log(JSON.stringify(location));    <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"\"geo=48.8503439,2.34658949\""</code>&#160;‚Äì c&#8217;est la s√©rialisation d√©finie par notre fonction <code>toJSON</code>.</p>
</li>
<li>
<p>Affiche <code>"{\"lat\":48.8503439,\"lon\":2.34658949}"</code>&#160;‚Äì sans la cl√© <code>toJSON</code>, notre objet initial est s√©rialis√© tel&#160;quel.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Notre impl√©mentation contenue dans la fonction <code>toJSON</code> est
responsable de renvoyer du texte seulement et de choisir les cl√©s
√† s√©rialiser.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">json/to-json-extra.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const location = {
  lat: 48.8503439,
  lon: 2.34658949,
  city: 'Paris',
  toJSON() {
    return `geo=${this.lat},${this.lon}`;
  }
}

console.log(JSON.stringify(location));    <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"\"geo=48.8503439,2.34658949\""</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Dans cette variante d&#8217;exemple, la cl√© <code>city</code> n&#8217;a pas √©t√© s√©rialis√©e
car notre fonction <code>toJSON</code> se pr√©occupait seulement des cl√©s <code>lat</code> et&#160;`lon`.</p>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> JSON</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur JSON.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/JSON" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/JSON</a>

</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="date">10. Interagir avec des dates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les calculs de date s&#8217;effectuent √† l&#8217;aide des objets <code>Date</code>.
Chaque instance repr√©sente un moment dans le temps, √† un jour
et √† une heure donn√©e.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">date/base.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const now = new Date();
const past = new Date('2013-12-04 10:00:00'); <b class="conum">(1)</b>

console.log(past.getUTCFullYear());           <b class="conum">(2)</b>
console.log(now.getUTCFullYear());            <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>On initialise l&#8217;objet date <code>past</code> au 04&#160;d√©cembre&#160;2013.</p>
</li>
<li>
<p>Affiche <code>2013</code>&#160;‚Äì l&#8217;ann√©e li√©e √† l&#8217;objet&#160;<code>past</code>.</p>
</li>
<li>
<p>Affiche <code>2018</code>&#160;‚Äì l&#8217;ann√©e li√©e √† l&#8217;objet&#160;<code>now</code> (date du jour).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Un certain nombre de m√©thodes <em>retournent</em> diff√©rents √©l√©ments de la date
contenue dans l&#8217;objet&#160;: ann√©e, secondes, jour de la semaine, etc.
Il en existe tout autant pour <em>modifier</em> ces √©l√©ments de date.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">date/set.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const past = new Date('2013-12-04 10:00:00');

past.setUTCFullYear('2015');           <b class="conum">(1)</b>
console.log(past.toISOString());       <b class="conum">(2)</b>

past.setUTCMonth(1);                   <b class="conum">(3)</b>
console.log(past.toISOString());       <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Change la date vers l&#8217;ann√©e&#160;<code>2015</code>.</p>
</li>
<li>
<p>Affiche <code>"2015-12-04T10:00:00.000Z"</code>.</p>
</li>
<li>
<p>Change la date vers le mois&#160;<code>1</code>.</p>
</li>
<li>
<p>Affiche <code>"2015-02-04T10:00:00.000Z"</code>&#160;‚Äì pourquoi le mois de f√©vrier&#160;??</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>L&#8217;exemple pr√©c√©dent illustre l&#8217;ambigu√Øt√© de la notion de <em>mois</em>.
Il s&#8217;agit en r√©alit√© de l'<em>index du mois</em>&#160;:
0&#160;correspond √† janvier, 1 √† f√©vrier, etc.</p>
</div>
<div class="paragraph">
<p>Les m√©thodes natives font pour la plupart r√©f√©rence √† l&#8217;anglais.
Elles offrent peu de confort de manipulation&#160;‚Äì on aimerait pouvoir
compter facilement le nombre de jours entre deux dates, ou retirer 30&#160;jours.</p>
</div>
<div class="paragraph">
<p>Quand nous utiliserons <a href="#../chapter-04/index.adoc">Node</a> et
<a href="#../chapter-05/index.adoc">npm</a>, nous verrons que nous aurons
√† disposition des biblioth√®ques facilitant les manipulations de dates.</p>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Date</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur Date.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Date" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Date</a>

</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="intl.datetimeformat">10.1. Formatage internationalis√© (Intl.DateTimeFormat)</h3>
<div class="paragraph">
<p>La sp√©cification <em>ECMA&#160;Intl</em> a √©t√© con√ßue pour ajouter des
fonctionnalit√©s relatives aux langues.
Cette sp√©cification est compl√©mentaire.
Son comportement varie en fonction du syst√®me d&#8217;exploitation
‚Äì mode d&#8217;installation de Node et/ou version du navigateur&#160;web.</p>
</div>
<div class="paragraph">
<p>Les m√©thodes <code>toLocaleString</code>, <code>toLocaleDateString</code> et
<code>toLocaleTimeString</code> renvoient respectivement une version localis√©e
d&#8217;une date compl√®te, d&#8217;une date et d&#8217;une heure.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">date/to-locale-date.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const past = new Date('2013-12-04 10:00:00');

console.log(past.toLocaleDateString());                 <b class="conum">(1)</b>

const options = { month: 'long' };
console.log(past.toLocaleDateString('fr-FR', options)); <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>04/12/2013</code>.</p>
</li>
<li>
<p>Affiche <code>d√©cembre</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">‚ö†Ô∏è</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Attention</span> M01,&#160;M02,&#160;etc. ?</div>
<div class="paragraph">
<p>Si, en formatant une date, les caract√®res <code>M01</code>, <code>M02</code> ou autre s&#8217;affichent,
c&#8217;est que le syst√®me n&#8217;est pas configur√© avec les libell√©s de la langue
demand√©e.</p>
</div>
<div class="paragraph">
<p>La langue par d√©faut est l&#8217;anglais.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Date/toLocaleDateString</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur Date/toLocaleDateString.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString</a>

</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Une version plus verbeuse consiste √† cr√©er un formateur avec
<code>Intl.DateTimeFormat</code>.
Ce formateur se r√©utilise pour transformer plusieurs fois
des dates diff√©rentes avec les m√™mes r√©glages
ou une m√™me date avec des formatages diff√©rents.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">date/intl.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const past = new Date('2013-12-04 10:00:00');
const options = {
  year: 'numeric', month: 'short', day: 'numeric'
};
const longOptions = {
  year: 'numeric', month: 'long', day: 'numeric',
  weekday: 'long'
};

const fr = new Intl.DateTimeFormat('fr-FR', options);
const frLong = new Intl.DateTimeFormat('fr-FR', longOptions);

console.log(fr.format(past));         <b class="conum">(1)</b>
console.log(frLong.format(past));     <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>4 d√©c. 2013</code>.</p>
</li>
<li>
<p>Affiche <code>mercredi 4 d√©cembre 2013</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> DateTimeFormat</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur DateTimeFormat.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/DateTimeFormat" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/DateTimeFormat</a>

</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="class">11. Partager une logique avec des objets de m√™me nature (Class)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Une classe est une structure qui partage des propri√©t√©s
et des m√©thodes entre les objets qui y font appel.
Une instance de classe est cr√©√©e en pr√©fixant un appel de fonction
par l&#8217;op√©rateur&#160;`new`.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const date1 = new Date();
const date2 = new Date('2013-12-04');</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nos deux variables sont des objets issus de la <em>classe</em> <a href="#date">Date</a>.
Chacune des variables b√©n√©ficie des m√©thodes d√©finies par cette classe.</p>
</div>
<div class="paragraph">
<p>Autrement dit, si les <a href="#object">structures d&#8217;objet</a> d√©finissent des donn√©es,
les classes d√©finissent des comportements partag√©s.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">class/base.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">class Book {
  constructor({ title, ean13 }) {     <b class="conum">(1)</b>
    this.title = title;               <b class="conum">(2)</b>
    this.ean13 = ean13;
  }

  toJSON() {                          <b class="conum">(3)</b>
    const {title, ean13} = this;
    return {title, ean13};
  }

  get isbn() {                        <b class="conum">(4)</b>
    return this.ean13.split(3)[1];
  }

  static clean(value) {               <b class="conum">(5)</b>
    return value.replace(/\D/g, '');
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Le constructeur re√ßoit un ou plusieurs argument(s) lors de l&#8217;instanciation de la classe.</p>
</li>
<li>
<p><code>this</code> fait r√©f√©rence √† <em>ce contexte</em>, c&#8217;est-√†-dire √† <em>cette instance de classe</em>&#160;; deux instances peuvent √™tre initialis√©es avec des donn√©es diff√©rentes.</p>
</li>
<li>
<p><code>toJSON</code> est une m√©thode de la classe.</p>
</li>
<li>
<p><code>isbn</code> est un accesseur (pr√©fixe <code>get</code>)&#160;‚Äì une propri√©t√© dont la valeur est calcul√©e √† chaque fois qu&#8217;elle est appel√©e.</p>
</li>
<li>
<p><code>clean</code> est une m√©thode dite <em>statique</em>&#160;‚Äì elle est appel√©e en dehors d&#8217;une instance.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Nous d√©velopperons cet exemple dans les sections qui suivent.
On peut d&#8217;ores et d√©j√† noter que la structure d&#8217;une classe
se d√©compose en plusieurs parties&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">La d√©finition</dt>
<dd>
<p>D√©finit le nom de la classe que l&#8217;on pourra instancier.</p>
</dd>
<dt class="hdlist1">Le constructeur</dt>
<dd>
<p>Partie ex√©cut√©e lorsque la classe est instanci√©e.
On y met le moins de choses possibles.
En g√©n√©ral, on copie les donn√©es pass√©es en argument.</p>
</dd>
<dt class="hdlist1">Les m√©thodes</dt>
<dd>
<p>Fonctions partag√©es entre toutes les instances de la classe.</p>
</dd>
<dt class="hdlist1">Les m√©thodes statiques</dt>
<dd>
<p>Fonctions partag√©es sans avoir √† instancier la classe.</p>
</dd>
<dt class="hdlist1">Les accesseurs et mutateurs</dt>
<dd>
<p>Fonctions qui d√©finissent le comportement de propri√©t√©s dynamiques.</p>
</dd>
<dt class="hdlist1">Le contexte (<code>this</code>)</dt>
<dd>
<p>On peut s&#8217;y r√©f√©rer dans les m√©thodes de la classe pour dire
<em>je fais r√©f√©rence √† cet objet</em> et, donc,
appeler les donn√©es et m√©thodes attenantes.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Classes</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur Classes.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Classes" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Classes</a>

</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="class.method">11.1. M√©thodes d&#8217;instance</h3>
<div class="paragraph">
<p>Les m√©thodes d√©finissent des comportements partag√©s entre chaque instance
de la classe.
Elles servent √† <em>retourner</em> ou <em>transformer</em> des valeurs rattach√©es √† l&#8217;objet.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">class/methods.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">class Book {
  constructor({ title }) {
    this.title = title;
  }

  isPublished() {
    return this.is_published === true;
  }

  publish() {
    this.is_published = true;
  }
}

const book1 = new Book({ title: 'Node.js' });
console.log(book1.isPublished());   <b class="conum">(1)</b>
book1.publish();
console.log(book1.isPublished());   <b class="conum">(2)</b>

const book2 = new Book({ title: 'CSS maintenables' });
console.log(book2.isPublished());   <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>false</code>&#160;‚Äì la propri√©t√© n&#8217;existe pas.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì la propri√©t√© <code>is_published</code> a √©t√© chang√©e √† la ligne pr√©c√©dente.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;‚Äì les donn√©es sont √©tanches entre chaque instance.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="class.static">11.2. M√©thodes statiques</h3>
<div class="paragraph">
<p>Les m√©thodes statiques sont pratiques pour mettre √† disposition du code
m√©tier de mani√®re organis√©e.
Elles se caract√©risent par le pr√©fixe <code>static</code> devant un nom de fonction.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">class/static.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">class Book {
  constructor({ title, ean13 }) {
    this.title = title;
    this.ean13 = ean13;
  }

  static clean(value) {
    return value.replace(/\D/g, '');
  }
}

const nodebook = new Book({
  title: 'Node.js',
  ean13: Book.clean('978-2212139938'),  <b class="conum">(1)</b>
});

console.log(nodebook.ean13);            <b class="conum">(2)</b>
console.log(nodebook.clean);            <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>On appelle la m√©thode statique <code>Book.clean</code> pour nettoyer le code EAN13.</p>
</li>
<li>
<p>Affiche <code>"9782212139938"</code>&#160;‚Äì la valeur a bien √©t√© nettoy√©e.</p>
</li>
<li>
<p>Affiche <code>undefined</code>&#160;‚Äì les m√©thodes statiques ne sont pas accessibles depuis l&#8217;instance de classe.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On verra dans le <a href="#../chapter-04/index.adoc">chapitre sur Node</a>
qu&#8217;on peut se baser sur les modules pour partager du code
sans avoir √† l&#8217;affecter √† une classe.</p>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Classes/static</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur Classes/static.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Classes/static" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Classes/static</a>

</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="object-getset">11.3. Accesseurs et mutateurs</h3>
<div class="paragraph">
<p>Ce type de m√©thode d√©finit des <em>attributs</em> dont la lecture ou l&#8217;√©criture
sont dynamiques.</p>
</div>
<div class="paragraph">
<p>L'<em>accesseur</em> est une fonction pr√©fix√©e par le mot-cl√© <code>get</code>&#160;; elle retourne
la valeur d&#8217;un attribut.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">getters.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const book = {
  title: 'Node.js',
  ean13: '9782212139938',
  get isbn() {            <b class="conum">(1)</b>
    return this.ean13.slice(3);
  }
}

console.log(book.ean13);  <b class="conum">(2)</b>
console.log(book.isbn);   <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>D√©finition de l'<em>accesseur</em>&#160;<code>isbn</code>.</p>
</li>
<li>
<p>Affiche <code>"9782212139938"</code>&#160;‚Äì c&#8217;est une propri√©t√© de l&#8217;objet <code>nodebook</code>.</p>
</li>
<li>
<p>Affiche <code>"2212139938"</code>&#160;‚Äì <code>isbn</code> s&#8217;utilise comme un attribut mais sa valeur est calcul√©e √† chaque fois qu&#8217;elle est appel√©e.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le <em>mutateur</em> est une fonction pr√©fix√©e par le mot-cl√© <code>set</code>&#160;; elle d√©finit
la valeur d&#8217;un ou plusieurs attribut(s).</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">setters.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const book = {
  title: 'Node.js',
  set ean13 (value) {     <b class="conum">(1)</b>
    this.issn = value.slice(0, 3);
    this.isbn = value.slice(3);
  }
}

book.ean13 = '9782212139938';

console.log(book.issn);   <b class="conum">(2)</b>
console.log(book.isbn);   <b class="conum">(3)</b>
console.log(book.ean13);  <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>D√©finition du <em>mutateur</em> <code>ean13</code>&#160;‚Äì il accepte un seul argument.</p>
</li>
<li>
<p>Affiche <code>978</code>&#160;‚Äì l&#8217;attribut a √©t√© cr√©√© lors de l&#8217;appel du mutateur.</p>
</li>
<li>
<p>Affiche <code>2212139938</code>&#160;‚Äì idem.</p>
</li>
<li>
<p>Affiche <code>undefined</code>&#160;‚Äì il faudrait cr√©er un <em>accesseur</em> <code>get ean13()</code> pour recomposer dynamiquement sa valeur.</p>
</li>
</ol>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Functions/get</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur Functions/get.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Functions/get" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Functions/get</a>

</td>
</tr>
</table>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Functions/set</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur Functions/set.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Functions/set" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Functions/set</a>

</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="class.extends">11.4. H√©ritage</h3>
<div class="paragraph">
<p>L&#8217;h√©ritage est un m√©canisme d&#8217;extension de classe.
C&#8217;est une pratique peu employ√©e en JavaScript,
principalement en raison de sa nature modulaire et fonctionnelle.</p>
</div>
<div class="paragraph">
<p>L&#8217;h√©ritage se caract√©rise par l&#8217;usage de l&#8217;op√©rateur <code>extends</code> lors de la
d√©finition de la classe et aussi par l&#8217;utilisation du mot-cl√© <code>super</code>
dans le constructeur.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">class/extends.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">class Product {               <b class="conum">(1)</b>
  constructor() {
    this.title = 'Sans titre';
  }
}

class Book extends Product {  <b class="conum">(2)</b>
  constructor(options) {
    super(options);

    if (options.title) {
      this.title = options.title;
    }
  }
}

const book = new Book({ title: 'Node.js' });
console.log(book.title);    <b class="conum">(3)</b>

const product = new Product({ title: 'Node.js' });
console.log(product.title); <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La classe <code>Product</code> affecte un titre par d√©faut lorsqu&#8217;un nouvel objet est initialis√©.</p>
</li>
<li>
<p>La classe <code>Book</code> affecte un titre donn√© en argument et, sinon, se base sur la valeur par d√©faut de la classe <code>Product</code>.</p>
</li>
<li>
<p>Affiche <code>'Node.js'</code>.</p>
</li>
<li>
<p>Affiche <code>'Sans titre'</code>&#160;‚Äì la propri√©t√© <code>title</code> ne se d√©finit pas dans le constructeur (cf.&#160;<code>class Product</code>).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>En pratique, c&#8217;est comme si on empilait les classes les unes sur les autres.
On l√®gue des m√©thodes aux classes qui h√©ritent.
Si une m√©thode porte le m√™me nom, la m√©thode &#8220;en haut de la pile&#8221; a la priorit√©.</p>
</div>
<div class="paragraph">
<p>L&#8217;appel √† la fonction <code>super()</code> <em>appelle le constructeur de la classe √©tendue</em>.
Si on ne l&#8217;appelle pas, le constructeur de la classe parente ne sera pas invoqu√©.</p>
</div>
<div class="paragraph">
<p>On reparlera de l&#8217;h√©ritage dans le <a href="#../chapter-09/index.adoc">chapitre 9</a>
avec un exemple populaire d&#8217;h√©ritage appliqu√© aux composants visuels avec
la biblioth√®que React.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="promise">12. Coordonner des actions asynchrones (Promise)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Une promesse est <strong>un objet retourn√© imm√©diatement</strong> mais dont le
<strong>r√©sultat est obtenu plus tard</strong>, de mani√®re asynchrone.
Cette r√©solution est soit <em>positive</em> soit <em>n√©gative</em>.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">promise/base.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const p = new Promise((resolve) =&gt; resolve('promesse tenue'));

console.log(p);                           <b class="conum">(1)</b>
console.log('un');                        <b class="conum">(2)</b>
p.then(message =&gt; console.log(message));  <b class="conum">(4)</b>
console.log('deux');                      <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>Promise</code>&#160;‚Äì ce n&#8217;est pas le r√©sultat que l&#8217;on voit, mais l&#8217;objet avec lequel interagir pour √™tre pr√©venu de la mise √† disposition du r√©sultat.</p>
</li>
<li>
<p>Affiche <code>"un"</code>.</p>
</li>
<li>
<p>Affiche <code>"deux"</code>&#160;‚Äì c&#8217;est parce que la ligne d&#8217;avant a mis en attente la <a href="#anonymous-function">fonction anonyme</a>.</p>
</li>
<li>
<p>Affiche <code>"promesse tenue"</code> en dernier.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">üí¨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Design Pattern</span> Executor</div>
<div class="paragraph">
<p>Le fait qu&#8217;une fonction nous passe d'<em>autres fonctions</em> pour commander
un r√©sultat s&#8217;appelle le <em>pattern Executor</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Une <code>Promise</code> s&#8217;orchestre en deux temps&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>L&#8217;initialisation<br>
On d√©cide de la mani√®re dont le traitement asynchrone sera effectu√©.</p>
</li>
<li>
<p>La r√©solution<br>
<em>Positive</em> en appelant <code>resolve()</code> ou <em>n√©gative</em>, en appelant <code>reject()</code>.
Le r√©sultat pass√© √† <code>resolve</code> sera transmis au premier argument de <code>then</code>.
Le r√©sultat pass√© √† <code>reject</code> sera transmis au deuxi√®me argument de <code>then</code>,
mais aussi au premier argument de <code>catch</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Une instance de <code>Promise</code> expose plusieurs m√©thodes pour propager
le statut de son ex√©cution&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>then(onSuccess[, onError])</code></dt>
<dd>
<p>Fonction acceptant un <em>callback</em> de r√©solution et
un autre de rejet (facultatif).</p>
</dd>
<dt class="hdlist1"><code>catch(onError)</code></dt>
<dd>
<p>Fonction acceptant un <em>callback</em> de rejet.</p>
</dd>
</dl>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">promise/then-catch.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const oddTime = (date) =&gt; {
  return new Promise((resolve, reject) =&gt; {
    parseInt(date.getTime() / 1000) % 2                 <b class="conum">(1)</b>
      ? resolve('le nombre de secondes est impair :-)')
      : reject('le nombre de secondes n\'est pas impair :-(');
  });
}

const now = new Date();

oddTime(now)                                            <b class="conum">(2)</b>
  .then(msg =&gt; console.log(msg), msg =&gt; console.error(msg));

oddTime(new Date(now.getTime() + 1000))                 <b class="conum">(3)</b>
  .then(msg =&gt; console.log(msg))                        <b class="conum">(4)</b>
  .catch(msg =&gt; console.error(msg))                     <b class="conum">(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La fonction <code>oddTime</code> accepte un argument de type &lt;&lt;date,Date&gt;. Elle r√©sout la promesse <em>positivement</em> (<code>resolve</code>) si le nombre de secondes est impair et <em>n√©gativement</em> (<code>reject</code>) sinon.</p>
</li>
<li>
<p>Utilisation de la forme compacte de <code>then</code> avec deux <em>callbacks</em>&#160;: un de succ√®s (associ√© √† <code>resolve</code>) et un d&#8217;√©chec (associ√© √† <code>reject</code>).</p>
</li>
<li>
<p>On cr√©e une nouvelle promesse, avec une date cal√©e une seconde plus tard.</p>
</li>
<li>
<p>Affiche <code>"le nombre de secondes est impair&#160;:-)"</code> puisque la r√©solution est positive.</p>
</li>
<li>
<p>Affiche <code>"le nombre de secondes n&#8217;est pas impair&#160;:-("</code> puisque la r√©solution est n√©gative.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">üí¨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Histoire</span> Standard <code>Promise/A+</code></div>
<div class="paragraph">
<p>Historiquement, de nombreuses biblioth√®ques ont propos√© leur propre impl√©mentation de promesses.
Elles avaient le d√©faut de ne pas √™tre interop√©rables.
La sp√©cification <em>Promise/A+</em> (<span class="URL"><a href="https://github.com/promises-aplus/promises-spec" class="bare">github.com/promises-aplus/promises-spec</a></span>)
a √©merg√© pour √©tablir un standard de compatibilit√©.</p>
</div>
<div class="paragraph">
<p>ECMAScript&#160;2015 introduit nativement cette API.
Il n&#8217;y a donc plus besoin de <em>polyfill</em> ou de biblioth√®que pour en b√©n√©ficier.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>En g√©n√©ral, on utilise les promesses <strong>pour aller plus vite</strong>,
parce qu&#8217;on peut continuer √† traiter d&#8217;autres actions en attendant
l&#8217;arriv√©e du r√©sultat.</p>
</div>
<div class="paragraph">
<p>C&#8217;est comme quand on se rend au restaurant&#160;:
les personnes en cuisine traitent des commandes
(actions longues) tandis que les personnes au service g√®rent
des interactions plus courtes mais plus fr√©quentes.
Au final, le ticket de commande contient la liste des promesses dont
on attend la r√©solution.</p>
</div>
<div class="paragraph">
<p>Nous verrons d&#8217;autres utilisations des promesses
dans le reste de l&#8217;ouvrage, plus particuli√®rement
avec <a href="../chapter-09/index.html#io-fetch">fetch()</a> au chapitre&#160;9
ainsi qu&#8217;avec <a href="../chapter-04/index.html#util.promisify">promisify</a> au chapitre&#160;4.</p>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Promise</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur Promise.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Promise" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Promise</a>

</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">üí°</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Lien</span> Guide des promesses</div>
<div class="paragraph">
<p>Le guide <span class="URL"><a href="https://www.w3.org/2001/tag/doc/promises-guide" class="bare">www.w3.org/2001/tag/doc/promises-guide</a></span> est <em>tr√®s</em> complet.
Il est en anglais ainsi qu&#8217;en libre consultation sur le site du&#160;W3C.</p>
</div>
<div class="paragraph">
<p>Son d√©p√¥t GitHub <span class="URL"><a href="https://github.com/w3ctag/promises-guide" class="bare">github.com/w3ctag/promises-guide</a></span> permet
d&#8217;y contribuer.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="promise.all">12.1. Collection de promesses</h3>
<div class="paragraph">
<p><code>Promise.all</code> est une <a href="#class.static">m√©thode statique</a> de la class <em>Promise</em>.
Elle accepte un <a href="#array">tableau</a> de promesses et en retourne elle-m√™me une promesse.
Cette derni√®re est r√©solue positivement si toutes les promesses r√©ussissent
et n√©gativement d√®s que l'<em>une d&#8217;entre elles</em> √©choue.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">promise/all.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const asyncRandom = () =&gt; new Promise((resolve) =&gt; {  <b class="conum">(1)</b>
  const timing = Math.floor(Math.random() * 2000);
  setTimeout(() =&gt; resolve(`r√©solu en ${timing}ms`), timing);
});

const all = Promise.all([                             <b class="conum">(2)</b>
  asyncRandom(),
  asyncRandom(),
  asyncRandom()
]);

all.then(messages =&gt; console.log(messages));          <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Cette fonction r√©sout la promesse apr√®s un d√©lai al√©atoire compris entre&#160;0 et 2000&#160;millisecondes.</p>
</li>
<li>
<p>On passe trois promesses √† <code>Promise.all</code>.</p>
</li>
<li>
<p>La r√©solution est d√©clench√©e d√®s que les trois promesses sont r√©solues&#160;‚Äì l&#8217;argument contient un tableau listant les r√©sultats <em>dans l&#8217;ordre initial</em> des promesses.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>L&#8217;exemple pr√©c√©dent illustre la <strong>parall√©lisation des actions</strong>.
Si la promesse la plus longue est r√©solue en une seconde,
alors le temps d&#8217;attente pour la r√©solution de <em>toutes les promesses</em>
est de une seconde.<br>
Si on avait √©t√© dans un encha√Ænement s√©quentiel, le temps d&#8217;attente
final aurait √©t√© l&#8217;accumulation des temps d&#8217;attente de la r√©solution
de chacune des promesses.</p>
</div>
<div class="paragraph">
<p>Les promesses sont un des meilleurs moyens √† notre disposition pour
<strong>modulariser</strong>, <strong>lin√©ariser</strong> et <strong>clarifier le sens</strong> du flot de notre code.</p>
</div>
</div>
<div class="sect2">
<h3 id="async-await">12.2. async/await</h3>
<div class="paragraph">
<p>Les op√©rateurs <code>async</code> et <code>await</code> aident √† mettre en pause
l&#8217;interpr√©teur ECMAScript, en attendant le r√©sultat d&#8217;une
fonction asynchrone (pr√©fix√©e par <code>async</code>).
Les <a href="#promise">promesses</a> sont implicitement compatibles.
On peut donc les mettre √† plat pour obtenir un r√©sultat
sans avoir √† utiliser <code>then</code> ni&#160;`catch`.</p>
</div>
<div class="paragraph">
<p>Transformons l&#8217;exemple de la <a href="#promise.all">section pr√©c√©dente</a>
pour comprendre l&#8217;impact de <code>async</code> et de&#160;`await`.</p>
</div>
<div class="listingblock interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">promise/async-await.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function asyncRandom() {
  return new Promise((resolve) =&gt; {
    const timing = Math.floor(Math.random() * 2000);
    setTimeout(() =&gt; resolve(`r√©solu en ${timing}ms`), timing);
  });
}

(async () =&gt; {                  <b class="conum">(1)</b>
  const all = [                 <b class="conum">(2)</b>
    await asyncRandom(),
    await asyncRandom(),
    await asyncRandom()
  ];

  console.log(all);             <b class="conum">(3)</b>
})();</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>On cr√©e une <em>fonction asynchrone auto-invoqu√©e</em>&#160;‚Äì parce qu&#8217;on ne peut pas encore utiliser de fonction asynchrone directement au niveau principal d&#8217;un script.</p>
</li>
<li>
<p>Chaque utilisation de <code>await</code> met l&#8217;interpr√©teur en pause.</p>
</li>
<li>
<p>L&#8217;affichage du temps d&#8217;ex√©cution de chaque promesse se fait lorsque les trois promesses sont r√©solues.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On gagne en lisibilit√©, mais on perd en vitesse.
Les promesses sont ex√©cut√©es s√©quentiellement et non en parall√®le.
Il est important d&#8217;arbitrer les choix de conception et d&#8217;√©viter de bloquer
l&#8217;ex√©cution de vos scripts sans raison explicite.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion">13. Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ECMAScript est un langage bien plus riche, complet et √©l√©gant qu&#8217;il n&#8217;y para√Æt.</p>
</div>
<div class="paragraph">
<p>Ce chapitre nous a <strong>appris les diff√©rentes structures de langage</strong>
communes √† tous les environnements comprenant ECMAScript.
Cela s&#8217;applique aussi bien √† Node qu&#8217;aux navigateurs web.<br>
Je vous invite √† revenir √† ce chapitre pour vous rafra√Æchir la m√©moire,
mais aussi pour jouer avec les exemples afin de confirmer votre compr√©hension
du langage.</p>
</div>
<div class="paragraph">
<p>Dans le <a href="#../chapter-04/index.adoc">chapitre suivant</a>, nous allons
<strong>relier ces apprentissages avec Node</strong>&#160;‚Äì notre interpr√©teur et environnement
d&#8217;ex√©cution JavaScript.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Derni√®re mise √† jour 2018-10-19 12:44:00 Coordinated Universal Time
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>